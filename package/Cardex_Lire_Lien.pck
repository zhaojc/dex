CREATE OR REPLACE PACKAGE Cardex_Lire_Lien IS
  TYPE DTS_LPV_LIEN_PARTICULARITE IS REF CURSOR RETURN LPV_LIEN_PARTICULARITE%ROWTYPE;
  PROCEDURE Sp_L_Lpv_Lien_Particularite(NEW_L_VE_CLE        IN LPV_LIEN_PARTICULARITE.L_VE_CLE%TYPE,
                                        NEW_L_LPV_REF_SITE  IN LPV_LIEN_PARTICULARITE.L_LPV_REF_SITE%TYPE,
                                        NEW_C_LPV_REF_GENRE IN LPV_LIEN_PARTICULARITE.C_LPV_REF_GENRE%TYPE,
                                        rc1                 IN OUT DTS_LPV_LIEN_PARTICULARITE);
  TYPE DTS_LDD_LIEN_DOSSIER IS REF CURSOR RETURN LDD_LIEN_DOSSIER%ROWTYPE;
  PROCEDURE Sp_L_Ldd_Lien_Dossier(NEW_L_DO_CLE   IN LDD_LIEN_DOSSIER.L_DO_CLE%TYPE,
                                  NEW_L_DO_SITE  IN LDD_LIEN_DOSSIER.L_DO_SITE%TYPE,
                                  NEW_C_DO_GENRE IN LDD_LIEN_DOSSIER.C_DO_GENRE%TYPE,
                                  rc1            IN OUT DTS_LDD_LIEN_DOSSIER);

  TYPE DTS_AD_ADRESSE IS REF CURSOR RETURN AD_ADRESSE%ROWTYPE;
  PROCEDURE Sp_L_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                            NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                            NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                            rc1                IN OUT DTS_AD_ADRESSE);
  TYPE REC_AD_ADRESSE IS RECORD(
    L_AD_CLE               AD_ADRESSE.L_AD_CLE%TYPE,
    L_SI_CLE               AD_ADRESSE.L_SI_CLE%TYPE,
    L_AD_REFERENCE         AD_ADRESSE.L_AD_REFERENCE%TYPE,
    V_AD_ADRESSE           AD_ADRESSE.V_AD_ADRESSE%TYPE,
    V_AD_ADRESSE2          AD_ADRESSE.V_AD_ADRESSE2%TYPE,
    V_AD_NUM_MUNICIPAL     AD_ADRESSE.V_AD_NUM_MUNICIPAL%TYPE,
    L_AD_TYPE_RUE          AD_ADRESSE.L_AD_TYPE_RUE%TYPE,
    V_AD_NOM_RUE           AD_ADRESSE.V_AD_NOM_RUE%TYPE,
    L_AD_POINT_CARDINAL    AD_ADRESSE.L_AD_POINT_CARDINAL%TYPE,
    L_AD_TYPE_UNITE        AD_ADRESSE.L_AD_TYPE_UNITE%TYPE,
    V_AD_NO_UNITE          AD_ADRESSE.V_AD_NO_UNITE%TYPE,
    V_AD_ADRESSE_POST      AD_ADRESSE.V_AD_ADRESSE_POST%TYPE,
    V_AD_ELECTRONIQUE_1    AD_ADRESSE.V_AD_ELECTRONIQUE_1%TYPE,
    V_AD_ELECTRONIQUE_2    AD_ADRESSE.V_AD_ELECTRONIQUE_2%TYPE,
    L_VI_CLE               AD_ADRESSE.L_VI_CLE%TYPE,
    V_AD_CODE_POSTAL       AD_ADRESSE.V_AD_CODE_POSTAL%TYPE,
    I_TE_CLE_1             AD_ADRESSE.I_TE_CLE_1%TYPE,
    I_AD_TEL_PERIODE_1     AD_ADRESSE.I_AD_TEL_PERIODE_1%TYPE,
    V_AD_TELEPHONE_1       AD_ADRESSE.V_AD_TELEPHONE_1%TYPE,
    I_TE_CLE_2             AD_ADRESSE.I_TE_CLE_2%TYPE,
    I_AD_TEL_PERIODE_2     AD_ADRESSE.I_AD_TEL_PERIODE_2%TYPE,
    V_AD_TELEPHONE_2       AD_ADRESSE.V_AD_TELEPHONE_2%TYPE,
    I_TE_CLE_3             AD_ADRESSE.I_TE_CLE_3%TYPE,
    I_AD_TEL_PERIODE_3     AD_ADRESSE.I_AD_TEL_PERIODE_3%TYPE,
    V_AD_TELEPHONE_3       AD_ADRESSE.V_AD_TELEPHONE_3%TYPE,
    I_ST_CLE               AD_ADRESSE.I_ST_CLE%TYPE,
    V_AD_COMMENTAIRE       AD_ADRESSE.V_AD_COMMENTAIRE%TYPE,
    V_AD_CREE_PAR          AD_ADRESSE.V_AD_CREE_PAR%TYPE,
    D_AD_DATE_CREATION     AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
    V_AD_MODIFIE_PAR       AD_ADRESSE.V_AD_MODIFIE_PAR%TYPE,
    D_AD_DATE_MODIFICATION AD_ADRESSE.D_AD_DATE_MODIFICATION%TYPE,
    L_AD_REF_SITE          AD_ADRESSE.L_AD_REF_SITE%TYPE,
    C_AD_REF_GENRE         AD_ADRESSE.C_AD_REF_GENRE%TYPE,
    I_PA_CLE               PA_PAYS.I_PA_CLE%TYPE,
    L_PR_CLE               PR_PROVINCE.L_PR_CLE%TYPE,
    B_AD_IND_RDD           AD_ADRESSE.B_AD_IND_RDD%TYPE);
  TYPE DTS2_AD_ADRESSE IS REF CURSOR RETURN REC_AD_ADRESSE;
  PROCEDURE Sp_L2_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             rc1                IN OUT DTS2_AD_ADRESSE);
  PROCEDURE Sp_L_Ad_Adresse(NEW_L_AD_CLE AD_ADRESSE.L_AD_CLE%TYPE,
                            NEW_L_SI_CLE AD_ADRESSE.L_SI_CLE%TYPE,
                            rc1          IN OUT DTS2_AD_ADRESSE);
  TYPE REC2_AD_ADRESSE IS RECORD(
    L_AD_CLE               AD_ADRESSE.L_AD_CLE%TYPE,
    L_SI_CLE               AD_ADRESSE.L_SI_CLE%TYPE,
    L_AD_REFERENCE         AD_ADRESSE.L_AD_REFERENCE%TYPE,
    V_AD_ADRESSE           AD_ADRESSE.V_AD_ADRESSE%TYPE,
    V_AD_ADRESSE2          AD_ADRESSE.V_AD_ADRESSE2%TYPE,
    V_AD_NUM_MUNICIPAL     AD_ADRESSE.V_AD_NUM_MUNICIPAL%TYPE,
    L_AD_TYPE_RUE          AD_ADRESSE.L_AD_TYPE_RUE%TYPE,
    V_AD_NOM_RUE           AD_ADRESSE.V_AD_NOM_RUE%TYPE,
    L_AD_POINT_CARDINAL    AD_ADRESSE.L_AD_POINT_CARDINAL%TYPE,
    L_AD_TYPE_UNITE        AD_ADRESSE.L_AD_TYPE_UNITE%TYPE,
    V_AD_NO_UNITE          AD_ADRESSE.V_AD_NO_UNITE%TYPE,
    V_AD_ADRESSE_POST      AD_ADRESSE.V_AD_ADRESSE_POST%TYPE,
    V_AD_ELECTRONIQUE_1    AD_ADRESSE.V_AD_ELECTRONIQUE_1%TYPE,
    V_AD_ELECTRONIQUE_2    AD_ADRESSE.V_AD_ELECTRONIQUE_2%TYPE,
    L_VI_CLE               AD_ADRESSE.L_VI_CLE%TYPE,
    V_AD_CODE_POSTAL       AD_ADRESSE.V_AD_CODE_POSTAL%TYPE,
    I_TE_CLE_1             AD_ADRESSE.I_TE_CLE_1%TYPE,
    V_AD_TELEPHONE_1       AD_ADRESSE.V_AD_TELEPHONE_1%TYPE,
    I_TE_CLE_2             AD_ADRESSE.I_TE_CLE_2%TYPE,
    V_AD_TELEPHONE_2       AD_ADRESSE.V_AD_TELEPHONE_2%TYPE,
    I_TE_CLE_3             AD_ADRESSE.I_TE_CLE_3%TYPE,
    V_AD_TELEPHONE_3       AD_ADRESSE.V_AD_TELEPHONE_3%TYPE,
    I_ST_CLE               AD_ADRESSE.I_ST_CLE%TYPE,
    V_AD_COMMENTAIRE       AD_ADRESSE.V_AD_COMMENTAIRE%TYPE,
    V_AD_CREE_PAR          AD_ADRESSE.V_AD_CREE_PAR%TYPE,
    D_AD_DATE_CREATION     AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
    V_AD_MODIFIE_PAR       AD_ADRESSE.V_AD_MODIFIE_PAR%TYPE,
    D_AD_DATE_MODIFICATION AD_ADRESSE.D_AD_DATE_MODIFICATION%TYPE,
    L_AD_REF_SITE          AD_ADRESSE.L_AD_REF_SITE%TYPE,
    C_AD_REF_GENRE         AD_ADRESSE.C_AD_REF_GENRE%TYPE,
    I_PA_CLE               PA_PAYS.I_PA_CLE%TYPE,
    L_PR_CLE               PR_PROVINCE.L_PR_CLE%TYPE,
    V_VI_VILLE             VI_VILLE.V_VI_VILLE%TYPE,
    B_AD_IND_RDD           AD_ADRESSE.B_AD_IND_RDD%TYPE,
    I_AD_TEL_PERIODE_1     AD_ADRESSE.I_AD_TEL_PERIODE_1%TYPE,
    I_AD_TEL_PERIODE_2     AD_ADRESSE.I_AD_TEL_PERIODE_2%TYPE,
    I_AD_TEL_PERIODE_3     AD_ADRESSE.I_AD_TEL_PERIODE_3%TYPE);
  TYPE DTS3_AD_ADRESSE IS REF CURSOR RETURN REC2_AD_ADRESSE;
  PROCEDURE Sp_L3_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE);
  PROCEDURE Sp_L3_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             NEW_DATE           IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE);
  TYPE DTS_LSC_CARACTERISTIQUE IS REF CURSOR RETURN LSC_CARACTERISTIQUE%ROWTYPE;
  PROCEDURE Sp_L_Lsc_Caracteristique(NEW_L_LSC_REFERENCE IN LSC_CARACTERISTIQUE.L_LSC_REFERENCE%TYPE,
                                     NEW_L_LSC_REF_SITE  IN LSC_CARACTERISTIQUE.L_LSC_REF_SITE%TYPE,
                                     NEW_C_LSC_REF_GENRE IN LSC_CARACTERISTIQUE.C_LSC_REF_GENRE%TYPE,
                                     rc1                 IN OUT DTS_LSC_CARACTERISTIQUE);
  TYPE DTS_LJD_LIEN_JEU_DOSSIER IS REF CURSOR RETURN LJD_LIEN_JEU_DOSSIER%ROWTYPE;
  PROCEDURE Sp_L_Ljd_Lien_Jeu_Dossier(NEW_L_DO_CLE        IN LJD_LIEN_JEU_DOSSIER.L_DO_CLE%TYPE,
                                      NEW_L_LJD_REF_SITE  IN LJD_LIEN_JEU_DOSSIER.L_LJD_REF_SITE%TYPE,
                                      NEW_C_LJD_REF_GENRE IN LJD_LIEN_JEU_DOSSIER.C_LJD_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS_LJD_LIEN_JEU_DOSSIER);

  TYPE DTS_LMM_LIEN_MULTIMEDIA IS REF CURSOR RETURN LMM_LIEN_MULTIMEDIA%ROWTYPE;
  PROCEDURE Sp_L_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                     NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                     NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                     rc1                 IN OUT DTS_LMM_LIEN_MULTIMEDIA);
  TYPE REC_LMM_LIEN_MULTIMEDIA IS RECORD(
    L_LMM_CLE          LMM_LIEN_MULTIMEDIA.L_LMM_CLE%TYPE,
    L_SI_CLE           LMM_LIEN_MULTIMEDIA.L_SI_CLE%TYPE,
    L_LMM_REFERENCE    LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
    L_LMM_REF_SITE     LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
    C_LMM_REF_GENRE    LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
    L_MM_CLE           LMM_LIEN_MULTIMEDIA.L_MM_CLE%TYPE,
    L_MM_REF_SITE      LMM_LIEN_MULTIMEDIA.L_MM_REF_SITE%TYPE,
    I_CC_CLE           LMM_LIEN_MULTIMEDIA.I_CC_CLE%TYPE,
    I_TM_CLE           MM_MULTIMEDIA.I_TM_CLE%TYPE,
    V_MM_DESCRIPTION   MM_MULTIMEDIA.V_MM_DESCRIPTION%TYPE,
    L_EM_CLE           MM_MULTIMEDIA.L_EM_CLE%TYPE,
    L_EM_SI_CLE        MM_MULTIMEDIA.L_EM_SI_CLE%TYPE,
    V_MM_CREE_PAR      MM_MULTIMEDIA.V_MM_CREE_PAR%TYPE,
    D_MM_DATE_CREATION MM_MULTIMEDIA.D_MM_DATE_CREATION%TYPE,
    V_MM_EXTENSION     MM_MULTIMEDIA.V_MM_EXTENSION%TYPE,
    B_MM_SELECTIONNER  MM_MULTIMEDIA.B_MM_SELECTIONNER%TYPE);
  TYPE DTS2_LMM_LIEN_MULTIMEDIA IS REF CURSOR RETURN REC_LMM_LIEN_MULTIMEDIA;
  PROCEDURE Sp_L2_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA);
  PROCEDURE Sp_L2_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      NEW_DATE            IN LMM_LIEN_MULTIMEDIA.D_LMM_DATE_CREATION%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA);
  PROCEDURE Sp_L3_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA);
  PROCEDURE Sp_L4_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA);

  TYPE DTS_IN_INTERVENANT IS REF CURSOR RETURN IN_INTERVENANT%ROWTYPE;
  PROCEDURE Sp_L_In_Intervenant(NEW_NAME IN IN_INTERVENANT.NAME%TYPE,
                                rc1      IN OUT DTS_IN_INTERVENANT);
  TYPE REC_IN_INTERVENANT IS RECORD(
    L_IN_CLE               IN_INTERVENANT.L_IN_CLE%TYPE,
    L_SI_CLE               IN_INTERVENANT.L_SI_CLE%TYPE,
    NAME                   IN_INTERVENANT.NAME%TYPE,
    I_LA_CLE               IN_INTERVENANT.I_LA_CLE%TYPE,
    I_ST_CLE               IN_INTERVENANT.I_ST_CLE%TYPE,
    I_CC_CLE               IN_INTERVENANT.I_CC_CLE%TYPE,
    I_NH_CLE               IN_INTERVENANT.I_NH_CLE%TYPE,
    V_IN_NO_EMPLOYE        IN_INTERVENANT.V_IN_NO_EMPLOYE%TYPE,
    V_IN_NOM               IN_INTERVENANT.V_IN_NOM%TYPE,
    V_IN_PRENOM            IN_INTERVENANT.V_IN_PRENOM%TYPE,
    V_IN_COMMENTAIRE       IN_INTERVENANT.V_IN_COMMENTAIRE%TYPE,
    C_IN_MOT_PASSE         IN_INTERVENANT.C_IN_MOT_PASSE%TYPE,
    L_IN_TEMPS_ACTIF       IN_INTERVENANT.L_IN_TEMPS_ACTIF%TYPE,
    L_IN_TEMPS_CONNEXION   IN_INTERVENANT.L_IN_TEMPS_CONNEXION%TYPE,
    V_IN_CREE_PAR          IN_INTERVENANT.V_IN_CREE_PAR%TYPE,
    D_IN_DATE_CREATION     IN_INTERVENANT.D_IN_DATE_CREATION%TYPE,
    V_IN_MODIFIE_PAR       IN_INTERVENANT.V_IN_MODIFIE_PAR%TYPE,
    D_IN_DATE_MODIFICATION IN_INTERVENANT.D_IN_DATE_MODIFICATION%TYPE,
    I_EN_CLE               EN_ENTITE.I_EN_CLE%TYPE,
    V_IN_NAME_PARENT       IN_INTERVENANT.V_IN_NAME_PARENT%TYPE,
    L_IN_SECTEUR           IN_INTERVENANT.L_IN_SECTEUR%TYPE,
    L_IN_SOUS_SECTEUR      IN_INTERVENANT.L_IN_SOUS_SECTEUR%TYPE);
  TYPE DTS2_IN_INTERVENANT IS REF CURSOR RETURN REC_IN_INTERVENANT;
  PROCEDURE Sp_L2_In_Intervenant(NEW_NAME IN IN_INTERVENANT.NAME%TYPE,
                                 rc1      IN OUT DTS2_IN_INTERVENANT);
  PROCEDURE Sp_L3_In_Intervenant(rc1 IN OUT DTS2_IN_INTERVENANT);
  TYPE DTS_SIS_SITE_INSCRIPTION IS REF CURSOR RETURN SIS_SITE_INSCRIPTION%ROWTYPE;
  PROCEDURE Sp_L_Sis_Site_Inscription(NEW_L_IS_CLE IN SIS_SITE_INSCRIPTION.L_IS_CLE%TYPE,
                                      NEW_L_SI_CLE IN SIS_SITE_INSCRIPTION.L_SI_CLE%TYPE,
                                      rc1          IN OUT DTS_SIS_SITE_INSCRIPTION);

  TYPE REC_SV_SUIVI_BASE IS RECORD(
    L_SV_CLE            SV_SUIVI.L_SV_CLE%TYPE,
    L_SI_CLE            SI_SITE.L_SI_CLE%TYPE,
    L_SV_REFERENCE      SV_SUIVI.L_SV_REFERENCE%TYPE,
    L_SV_REF_SITE       SV_SUIVI.L_SV_REF_SITE%TYPE,
    C_SV_REF_GENRE      SV_SUIVI.C_SV_REF_GENRE%TYPE,
    V_SV_SUIVI          SV_SUIVI.V_SV_SUIVI%TYPE,
    I_TC_CLE            TC_TYPE_ACTIVITE.I_TC_CLE%TYPE,
    I_ST_CLE            ST_STATUT.I_ST_CLE%TYPE,
    D_SV_DATE_PREVUE    SV_SUIVI.D_SV_DATE_PREVUE%TYPE,
    D_SV_DATE_COMPLETEE SV_SUIVI.D_SV_DATE_COMPLETEE%TYPE,
    L_SV_PO_ORIGINE     PO_POSTE.L_PO_CLE%TYPE,
    V_SV_DEMANDEUR      IN_INTERVENANT.NAME%TYPE,
    V_SV_INTERVENANT    IN_INTERVENANT.NAME%TYPE,
    L_SV_PO_ASSIGNE     PO_POSTE.L_PO_CLE%TYPE,
    V_SV_CREE_PAR       IN_INTERVENANT.NAME%TYPE,
    I_CC_SUIVI          CC_CONFIDENTIALITE.I_CC_CLE%TYPE,
    I_NH_SUIVI          NH_NIVEAU_HIERARCHIQUE.I_NH_CLE%TYPE,
    I_CC_CREATEUR       CC_CONFIDENTIALITE.I_CC_CLE%TYPE,
    I_NH_CREATEUR       NH_NIVEAU_HIERARCHIQUE.I_NH_CLE%TYPE,
    D_SV_DATE_CREATION  SV_SUIVI.D_SV_DATE_CREATION%TYPE,
    V_SV_MODIFIE_PAR    IN_INTERVENANT.NAME%TYPE,
    D_SV_MODIFICATION   SV_SUIVI.D_SV_MODIFICATION%TYPE,
    V_SV_APPROBATEUR    IN_INTERVENANT.NAME%TYPE,
    I_CC_APPROBATEUR    CC_CONFIDENTIALITE.I_CC_CLE%TYPE,
    I_NH_APPROBATEUR    NH_NIVEAU_HIERARCHIQUE.I_NH_CLE%TYPE,
    D_SV_APPROBATION    SV_SUIVI.D_SV_APPROBATION%TYPE,
    V_SV_REFERENCE_1    SV_SUIVI.V_SV_REFERENCE_1%TYPE,
    V_SV_REFERENCE_2    SV_SUIVI.V_SV_REFERENCE_2%TYPE,
    V_SV_REFERENCE_3    SV_SUIVI.V_SV_REFERENCE_3%TYPE,
    I_EN_CLE            EN_ENTITE.I_EN_CLE%TYPE);

  TYPE DTS_SV_SUIVI IS REF CURSOR RETURN REC_SV_SUIVI_BASE;
  PROCEDURE Sp_L_Sv_Suivi(NEW_L_SV_REFERENCE IN SV_SUIVI.L_SV_REFERENCE%TYPE,
                          NEW_L_SV_REF_SITE  IN SV_SUIVI.L_SV_REF_SITE%TYPE,
                          NEW_C_SV_REF_GENRE IN SV_SUIVI.C_SV_REF_GENRE%TYPE,
                          rc1                IN OUT DTS_SV_SUIVI);
  PROCEDURE Sp_L_Sv_Suivi(NEW_L_SV_CLE IN SV_SUIVI.L_SV_CLE%TYPE,
                          NEW_L_SI_CLE IN SV_SUIVI.L_SI_CLE%TYPE,
                          rc1          IN OUT DTS_SV_SUIVI);
  TYPE REC_SV_SUIVI IS RECORD(
    L_SV_CLE            SV_SUIVI.L_SV_CLE%TYPE,
    L_SI_CLE            SI_SITE.L_SI_CLE%TYPE,
    L_SV_REFERENCE      SV_SUIVI.L_SV_REFERENCE%TYPE,
    L_SV_REF_SITE       SV_SUIVI.L_SV_REF_SITE%TYPE,
    C_SV_REF_GENRE      SV_SUIVI.C_SV_REF_GENRE%TYPE,
    V_SV_SUIVI          SV_SUIVI.V_SV_SUIVI%TYPE,
    I_TC_CLE            TC_TYPE_ACTIVITE.I_TC_CLE%TYPE,
    I_ST_CLE            ST_STATUT.I_ST_CLE%TYPE,
    D_SV_DATE_PREVUE    SV_SUIVI.D_SV_DATE_PREVUE%TYPE,
    D_SV_DATE_COMPLETEE SV_SUIVI.D_SV_DATE_COMPLETEE%TYPE,
    L_SV_PO_ORIGINE     PO_POSTE.L_PO_CLE%TYPE,
    V_SV_DEMANDEUR      IN_INTERVENANT.NAME%TYPE,
    V_SV_INTERVENANT    IN_INTERVENANT.NAME%TYPE,
    L_SV_PO_ASSIGNE     PO_POSTE.L_PO_CLE%TYPE,
    V_SV_CREE_PAR       IN_INTERVENANT.NAME%TYPE,
    I_CC_SUIVI          CC_CONFIDENTIALITE.I_CC_CLE%TYPE,
    I_NH_SUIVI          NH_NIVEAU_HIERARCHIQUE.I_NH_CLE%TYPE,
    I_CC_CREATEUR       CC_CONFIDENTIALITE.I_CC_CLE%TYPE,
    I_NH_CREATEUR       NH_NIVEAU_HIERARCHIQUE.I_NH_CLE%TYPE,
    D_SV_DATE_CREATION  SV_SUIVI.D_SV_DATE_CREATION%TYPE,
    V_SV_MODIFIE_PAR    IN_INTERVENANT.NAME%TYPE,
    D_SV_MODIFICATION   SV_SUIVI.D_SV_MODIFICATION%TYPE,
    V_SV_APPROBATEUR    IN_INTERVENANT.NAME%TYPE,
    I_CC_APPROBATEUR    CC_CONFIDENTIALITE.I_CC_CLE%TYPE,
    I_NH_APPROBATEUR    NH_NIVEAU_HIERARCHIQUE.I_NH_CLE%TYPE,
    D_SV_APPROBATION    SV_SUIVI.D_SV_APPROBATION%TYPE,
    V_SV_REFERENCE_1    SV_SUIVI.V_SV_REFERENCE_1%TYPE,
    V_SV_REFERENCE_2    SV_SUIVI.V_SV_REFERENCE_2%TYPE,
    V_SV_REFERENCE_3    SV_SUIVI.V_SV_REFERENCE_3%TYPE,
    L_DO_CLE            DO_DOSSIER.L_DO_CLE%TYPE,
    L_DO_SITE           SI_SITE.L_SI_CLE%TYPE,
    V_DO_MOT_PASSE      DO_DOSSIER.V_DO_MOT_PASSE%TYPE,
    I_NA_CLE            NA_NATURE.I_NA_CLE%TYPE,
    I_CC_CLE            DO_DOSSIER.I_CC_CLE%TYPE,
    I_NH_CLE            DO_DOSSIER.I_NH_CLE%TYPE,
    V_DO_CREE_PAR       DO_DOSSIER.V_DO_CREE_PAR%TYPE,
    V_DO_NUMERO_DOSSIER DO_DOSSIER.V_DO_NUMERO_DOSSIER%TYPE);
  TYPE DTS_RAP_SV_SUIVI IS REF CURSOR RETURN REC_SV_SUIVI;
  --Rapport demandé par le bouton Suivi du Menu principal.
  PROCEDURE Sp_Rap_Sv_Suivi(NEW_V_SV_DEMANDEUR       IN SV_SUIVI.V_SV_DEMANDEUR%TYPE,
                            NEW_V_SV_INTERVENANT     IN SV_SUIVI.V_SV_INTERVENANT%TYPE,
                            NEW_SECTEUR_ASSIGNE      IN VARCHAR2,
                            NEW_SECTEUR_ORIGINE      IN VARCHAR2,
                            NEW_DATE_CREATION_DEBUT  IN SV_SUIVI.D_SV_DATE_CREATION%TYPE,
                            NEW_DATE_CREATION_FIN    IN SV_SUIVI.D_SV_DATE_CREATION%TYPE,
                            NEW_V_SV_APPROBATEUR     IN SV_SUIVI.V_SV_APPROBATEUR%TYPE,
                            NEW_DATE_PREVUE_DEBUT    IN SV_SUIVI.D_SV_DATE_PREVUE%TYPE,
                            NEW_DATE_PREVUE_FIN      IN SV_SUIVI.D_SV_DATE_PREVUE%TYPE,
                            NEW_DATE_COMPLETEE_DEBUT IN SV_SUIVI.D_SV_DATE_COMPLETEE%TYPE,
                            NEW_DATE_COMPLETEE_FIN   IN SV_SUIVI.D_SV_DATE_COMPLETEE%TYPE,
                            NEW_SITE_INTERVENANT     IN VARCHAR2,
                            rc1                      IN OUT DTS_RAP_SV_SUIVI);
  TYPE DTS_CN_CONSIGNATION IS REF CURSOR RETURN CN_CONSIGNATION%ROWTYPE;
  PROCEDURE Sp_L_CN_CONSIGNATION(NEW_L_CN_REF_CLE   IN CN_CONSIGNATION.L_CN_REF_CLE%TYPE,
                                 NEW_L_CN_REF_SITE  IN CN_CONSIGNATION.L_CN_REF_SITE%TYPE,
                                 NEW_C_CN_REF_GENRE IN CN_CONSIGNATION.C_CN_REF_GENRE%TYPE,
                                 rc1                IN OUT DTS_CN_CONSIGNATION);
  PROCEDURE Sp_L_CN_CONSIGNATION(NEW_L_CN_CLE IN CN_CONSIGNATION.L_CN_CLE%TYPE,
                                 NEW_L_SI_CLE IN CN_CONSIGNATION.L_SI_CLE%TYPE,
                                 rc1          IN OUT DTS_CN_CONSIGNATION);
  TYPE REC_CN_CONSIGNATION IS RECORD(
    L_CN_CLE               CN_CONSIGNATION.L_CN_CLE%TYPE,
    L_SI_CLE               SI_SITE.L_SI_CLE%TYPE,
    L_CN_REF_CLE           CN_CONSIGNATION.L_CN_REF_CLE%TYPE,
    L_CN_REF_SITE          CN_CONSIGNATION.L_CN_REF_SITE%TYPE,
    C_CN_REF_GENRE         CN_CONSIGNATION.C_CN_REF_GENRE%TYPE,
    I_DE_CLE               DE_DEVISE.I_DE_CLE%TYPE,
    I_TN_CLE               TN_TYPE_CONSIGNATION.I_TN_CLE%TYPE,
    L_CN_QUANTITE          CN_CONSIGNATION.L_CN_QUANTITE%TYPE,
    R_CN_PRIX              CN_CONSIGNATION.R_CN_PRIX%TYPE,
    R_CN_MONTANT           CN_CONSIGNATION.R_CN_MONTANT%TYPE,
    V_CN_POIDS             CN_CONSIGNATION.V_CN_POIDS%TYPE,
    V_CN_DIMENSION         CN_CONSIGNATION.V_CN_DIMENSION%TYPE,
    V_CN_MARQUE            CN_CONSIGNATION.V_CN_MARQUE%TYPE,
    V_CN_MODELE            CN_CONSIGNATION.V_CN_MODELE%TYPE,
    V_CN_FOURNISSEUR       CN_CONSIGNATION.V_CN_FOURNISSEUR%TYPE,
    V_CN_DESCRIPTION       CN_CONSIGNATION.V_CN_DESCRIPTION%TYPE,
    V_CN_COMMENTAIRE       CN_CONSIGNATION.V_CN_COMMENTAIRE%TYPE,
    V_CN_NUMERO_SERIE      CN_CONSIGNATION.V_CN_NUMERO_SERIE%TYPE,
    V_CN_CREE_PAR          CN_CONSIGNATION.V_CN_CREE_PAR%TYPE,
    D_CN_DATE_CREATION     CN_CONSIGNATION.D_CN_DATE_CREATION%TYPE,
    V_CN_MODIFIE_PAR       CN_CONSIGNATION.V_CN_MODIFIE_PAR%TYPE,
    D_CN_DATE_MODIFICATION CN_CONSIGNATION.D_CN_DATE_MODIFICATION%TYPE,
    V_CN_APPROUVE_PAR      CN_CONSIGNATION.V_CN_APPROUVE_PAR%TYPE,
    D_CN_DATE_APPROBATION  CN_CONSIGNATION.D_CN_DATE_APPROBATION%TYPE,
    C_CN_APPROUVABLE       CN_CONSIGNATION.C_CN_APPROUVABLE%TYPE,
    C_CN_APPROUVE          CN_CONSIGNATION.C_CN_APPROUVE%TYPE,
    V_CN_REFERENCE1        CN_CONSIGNATION.V_CN_REFERENCE1%TYPE,
    V_CN_REFERENCE2        CN_CONSIGNATION.V_CN_REFERENCE2%TYPE,
    I_DN_CLE               DN_DENOMINATION.I_DN_CLE%TYPE);
  TYPE DTS_RAP_CN_CONSIGNATION IS REF CURSOR RETURN REC_CN_CONSIGNATION;
  TYPE DTS_PSU_MANDAT IS REF CURSOR RETURN PSU_MANDAT%ROWTYPE;
  PROCEDURE Sp_L_PSU_MANDAT(NEW_L_PSU_CLE IN PSU_MANDAT.L_PSU_CLE%TYPE,
                            NEW_L_SI_CLE  IN PSU_MANDAT.L_SI_CLE%TYPE,
                            rc1           IN OUT DTS_PSU_MANDAT);

  TYPE REC_LPD_PARTAGE_DOSSIER IS RECORD(
    L_LPD_CLE           LPD_PARTAGE_DOSSIER.L_LPD_CLE%TYPE,
    L_SI_CLE            LPD_PARTAGE_DOSSIER.L_SI_CLE%TYPE,
    L_LPD_REFERENCE     LPD_PARTAGE_DOSSIER.L_LPD_REFERENCE%TYPE,
    V_LPD_NAME          LPD_PARTAGE_DOSSIER.V_LPD_NAME%TYPE,
    V_LPD_CREE_PAR      LPD_PARTAGE_DOSSIER.V_LPD_CREE_PAR%TYPE,
    D_LPD_DATE_CREATION LPD_PARTAGE_DOSSIER.D_LPD_DATE_CREATION%TYPE,
    L_LPD_REF_SITE      LPD_PARTAGE_DOSSIER.L_LPD_REF_SITE%TYPE,
    C_LPD_GENRE         LPD_PARTAGE_DOSSIER.C_LPD_GENRE%TYPE,
    SITE                SI_SITE.L_SI_CLE%TYPE,
    V_TR_DESCRIPTION    TR_TRADUCTION.V_TR_DESCRIPTION%TYPE);
  TYPE DTS_LPD_PARTAGE_DOSSIER IS REF CURSOR RETURN REC_LPD_PARTAGE_DOSSIER;
  PROCEDURE SP_L_LPD_PARTAGE_DOSSIER(NEW_L_LPD_REFERENCE IN LPD_PARTAGE_DOSSIER.L_LPD_REFERENCE%TYPE,
                                     NEW_L_LPD_REF_SITE  IN LPD_PARTAGE_DOSSIER.L_LPD_REF_SITE%TYPE,
                                     rc1                 IN OUT DTS_LPD_PARTAGE_DOSSIER);
  PROCEDURE SP_L_LPD_PARTAGE_DOSSIER2(NEW_L_LPD_REFERENCE IN LPD_PARTAGE_DOSSIER.L_LPD_REFERENCE%TYPE,
                                     NEW_L_LPD_REF_SITE  IN LPD_PARTAGE_DOSSIER.L_LPD_REF_SITE%TYPE,
                                     rc1                 IN OUT DTS_LPD_PARTAGE_DOSSIER);

  TYPE REC_SU_SUJET_AD_ADRESSE IS RECORD(
    L_SU_CLE               SU_SUJET.L_SU_CLE%TYPE,
    L_SU_SI_CLE            SU_SUJET.L_SI_CLE%TYPE,
    I_SX_CLE               SU_SUJET.I_SX_CLE%TYPE,
    I_SU_ST_CLE            SU_SUJET.I_ST_CLE%TYPE,
    I_NT_CLE               SU_SUJET.I_NT_CLE%TYPE,
    I_RA_CLE               SU_SUJET.I_RA_CLE%TYPE,
    I_LS_CLE               SU_SUJET.I_LS_CLE%TYPE,
    V_SU_NOM               SU_SUJET.V_SU_NOM%TYPE,
    V_SU_PRENOM            SU_SUJET.V_SU_PRENOM%TYPE,
    V_SU_SURNOM            SU_SUJET.V_SU_SURNOM%TYPE,
    D_SU_DATE_NAISSANCE    SU_SUJET.D_SU_DATE_NAISSANCE%TYPE,
    L_SU_TYPE_AGE          SU_SUJET.L_SU_TYPE_AGE%TYPE,
    C_SU_ASSURANCE_SOCIALE SU_SUJET.C_SU_ASSURANCE_SOCIALE%TYPE,
    V_SU_PERMIS_CONDUIRE   SU_SUJET.V_SU_PERMIS_CONDUIRE%TYPE,
    V_SU_GRANDEUR_METRIQUE SU_SUJET.V_SU_GRANDEUR_METRIQUE%TYPE,
    V_SU_GRANDEUR_IMPERIAL SU_SUJET.V_SU_GRANDEUR_IMPERIAL%TYPE,
    V_SU_POIDS_METRIQUE    SU_SUJET.V_SU_POIDS_METRIQUE%TYPE,
    V_SU_POIDS_IMPERIAL    SU_SUJET.V_SU_POIDS_IMPERIAL%TYPE,
    C_SU_SYSTEME           SU_SUJET.C_SU_SYSTEME%TYPE,
    I_CC_CLE               SU_SUJET.I_CC_CLE%TYPE,
    V_SU_MOT_PASSE         SU_SUJET.V_SU_MOT_PASSE%TYPE,
    V_SU_REFERENCE_1       SU_SUJET.V_SU_REFERENCE_1%TYPE,
    V_SU_REFERENCE_2       SU_SUJET.V_SU_REFERENCE_2%TYPE,
    V_SU_REFERENCE_3       SU_SUJET.V_SU_REFERENCE_3%TYPE,
    V_SU_CREE_PAR          SU_SUJET.V_SU_CREE_PAR%TYPE,
    D_SU_DATE_CREATION     SU_SUJET.D_SU_DATE_CREATION%TYPE,
    C_SU_SNDX_NOM          SU_SUJET.C_SU_SNDX_NOM%TYPE,
    C_SU_SNDX_PRENOM       SU_SUJET.C_SU_SNDX_PRENOM%TYPE,
    C_SU_SNDX_SURNOM       SU_SUJET.C_SU_SNDX_SURNOM%TYPE,
    I_SE_CLE               SE_SEVERITE.I_SE_CLE%TYPE,
    I_SE_CLE_AUTRES        SE_SEVERITE.I_SE_CLE%TYPE,
    I_SE_CLE_CASINO        SE_SEVERITE.I_SE_CLE%TYPE,
    V_SU_NO_PASSEPORT      SU_SUJET.V_SU_NO_PASSEPORT%TYPE,
    I_EN_CLE               SI_SITE.I_EN_CLE%TYPE,
    V_SU_ASSURANCE_MALADIE SU_SUJET.V_SU_ASSURANCE_MALADIE%TYPE,
    L_AD_CLE               AD_ADRESSE.L_AD_CLE%TYPE,
    L_AD_SI_CLE            AD_ADRESSE.L_SI_CLE%TYPE,
    L_AD_REFERENCE         AD_ADRESSE.L_AD_REFERENCE%TYPE,
    V_AD_ADRESSE           AD_ADRESSE.V_AD_ADRESSE%TYPE,
    V_AD_ADRESSE2          AD_ADRESSE.V_AD_ADRESSE2%TYPE,
    V_AD_NUM_MUNICIPAL     AD_ADRESSE.V_AD_NUM_MUNICIPAL%TYPE,
    L_AD_TYPE_RUE          AD_ADRESSE.L_AD_TYPE_RUE%TYPE,
    V_AD_NOM_RUE           AD_ADRESSE.V_AD_NOM_RUE%TYPE,
    L_AD_POINT_CARDINAL    AD_ADRESSE.L_AD_POINT_CARDINAL%TYPE,
    L_AD_TYPE_UNITE        AD_ADRESSE.L_AD_TYPE_UNITE%TYPE,
    V_AD_NO_UNITE          AD_ADRESSE.V_AD_NO_UNITE%TYPE,
    V_AD_ADRESSE_POST      AD_ADRESSE.V_AD_ADRESSE_POST%TYPE,
    V_AD_ELECTRONIQUE_1    AD_ADRESSE.V_AD_ELECTRONIQUE_1%TYPE,
    V_AD_ELECTRONIQUE_2    AD_ADRESSE.V_AD_ELECTRONIQUE_2%TYPE,
    L_VI_CLE               AD_ADRESSE.L_VI_CLE%TYPE,
    V_AD_CODE_POSTAL       AD_ADRESSE.V_AD_CODE_POSTAL%TYPE,
    I_TE_CLE_1             AD_ADRESSE.I_TE_CLE_1%TYPE,
    V_AD_TELEPHONE_1       AD_ADRESSE.V_AD_TELEPHONE_1%TYPE,
    I_TE_CLE_2             AD_ADRESSE.I_TE_CLE_2%TYPE,
    V_AD_TELEPHONE_2       AD_ADRESSE.V_AD_TELEPHONE_2%TYPE,
    I_TE_CLE_3             AD_ADRESSE.I_TE_CLE_3%TYPE,
    V_AD_TELEPHONE_3       AD_ADRESSE.V_AD_TELEPHONE_3%TYPE,
    I_AD_ST_CLE            AD_ADRESSE.I_ST_CLE%TYPE,
    V_AD_COMMENTAIRE       AD_ADRESSE.V_AD_COMMENTAIRE%TYPE,
    V_AD_CREE_PAR          AD_ADRESSE.V_AD_CREE_PAR%TYPE,
    D_AD_DATE_CREATION     AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
    V_AD_MODIFIE_PAR       AD_ADRESSE.V_AD_MODIFIE_PAR%TYPE,
    D_AD_DATE_MODIFICATION AD_ADRESSE.D_AD_DATE_MODIFICATION%TYPE,
    L_AD_REF_SITE          AD_ADRESSE.L_AD_REF_SITE%TYPE,
    C_AD_REF_GENRE         AD_ADRESSE.C_AD_REF_GENRE%TYPE,
    I_PA_CLE               PA_PAYS.I_PA_CLE%TYPE,
    L_PR_CLE               PR_PROVINCE.L_PR_CLE%TYPE);
  TYPE DTS_SU_SUJET_AD_ADRESSE IS REF CURSOR RETURN REC_SU_SUJET_AD_ADRESSE;
  PROCEDURE Sp_L_Su_Sujet_Ad_Adresse(NEW_L_SI_CLE            IN SU_SUJET.L_SI_CLE%TYPE,
                                     NEW_DATE_CREATION_DEBUT IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                     NEW_DATE_CREATION_FIN   IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                     rc1                     IN OUT DTS_SU_SUJET_AD_ADRESSE);

  TYPE REC_SO_SOCIETE_AD_ADRESSE IS RECORD(
    L_SO_CLE                 SO_SOCIETE.L_SO_CLE%TYPE,
    L_SI_CLE                 SO_SOCIETE.L_SI_CLE%TYPE,
    I_ST_CLE                 SO_SOCIETE.I_ST_CLE%TYPE,
    I_LS_CLE                 SO_SOCIETE.I_LS_CLE%TYPE,
    V_SO_RAISON_SOCIALE      SO_SOCIETE.V_SO_RAISON_SOCIALE%TYPE,
    V_SO_NOM                 SO_SOCIETE.V_SO_NOM%TYPE,
    I_CL_CLE                 SO_SOCIETE.I_CL_CLE%TYPE,
    D_SO_DATE_FONDATION      SO_SOCIETE.D_SO_DATE_FONDATION%TYPE,
    I_CC_CLE                 SO_SOCIETE.I_CC_CLE%TYPE,
    V_SO_MOT_PASSE           SO_SOCIETE.V_SO_MOT_PASSE%TYPE,
    V_SO_REFERENCE_NOM       SO_SOCIETE.V_SO_REFERENCE_NOM%TYPE,
    V_SO_REFERENCE_PRENOM    SO_SOCIETE.V_SO_REFERENCE_PRENOM%TYPE,
    V_SO_REFERENCE_1         SO_SOCIETE.V_SO_REFERENCE_1%TYPE,
    V_SO_REFERENCE_2         SO_SOCIETE.V_SO_REFERENCE_2%TYPE,
    V_SO_REFERENCE_3         SO_SOCIETE.V_SO_REFERENCE_3%TYPE,
    V_SO_CREE_PAR            SO_SOCIETE.V_SO_CREE_PAR%TYPE,
    D_SO_DATE_CREATION       SO_SOCIETE.D_SO_DATE_CREATION%TYPE,
    C_SO_SNDX_RAISON_SOCIALE SO_SOCIETE.C_SO_SNDX_RAISON_SOCIALE%TYPE,
    C_SO_SNDX_NOM            SO_SOCIETE.C_SO_SNDX_NOM%TYPE,
    I_SE_CLE                 SE_SEVERITE.I_SE_CLE%TYPE,
    I_SE_CLE_CASINO          SE_SEVERITE.I_SE_CLE%TYPE,
    L_AD_CLE                 AD_ADRESSE.L_AD_CLE%TYPE,
    L_AD_SI_CLE              AD_ADRESSE.L_SI_CLE%TYPE,
    L_AD_REFERENCE           AD_ADRESSE.L_AD_REFERENCE%TYPE,
    V_AD_ADRESSE             AD_ADRESSE.V_AD_ADRESSE%TYPE,
    V_AD_ADRESSE2            AD_ADRESSE.V_AD_ADRESSE2%TYPE,
    V_AD_NUM_MUNICIPAL       AD_ADRESSE.V_AD_NUM_MUNICIPAL%TYPE,
    L_AD_TYPE_RUE            AD_ADRESSE.L_AD_TYPE_RUE%TYPE,
    V_AD_NOM_RUE             AD_ADRESSE.V_AD_NOM_RUE%TYPE,
    L_AD_POINT_CARDINAL      AD_ADRESSE.L_AD_POINT_CARDINAL%TYPE,
    L_AD_TYPE_UNITE          AD_ADRESSE.L_AD_TYPE_UNITE%TYPE,
    V_AD_NO_UNITE            AD_ADRESSE.V_AD_NO_UNITE%TYPE,
    V_AD_ADRESSE_POST        AD_ADRESSE.V_AD_ADRESSE_POST%TYPE,
    V_AD_ELECTRONIQUE_1      AD_ADRESSE.V_AD_ELECTRONIQUE_1%TYPE,
    V_AD_ELECTRONIQUE_2      AD_ADRESSE.V_AD_ELECTRONIQUE_2%TYPE,
    L_VI_CLE                 AD_ADRESSE.L_VI_CLE%TYPE,
    V_AD_CODE_POSTAL         AD_ADRESSE.V_AD_CODE_POSTAL%TYPE,
    I_TE_CLE_1               AD_ADRESSE.I_TE_CLE_1%TYPE,
    V_AD_TELEPHONE_1         AD_ADRESSE.V_AD_TELEPHONE_1%TYPE,
    I_TE_CLE_2               AD_ADRESSE.I_TE_CLE_2%TYPE,
    V_AD_TELEPHONE_2         AD_ADRESSE.V_AD_TELEPHONE_2%TYPE,
    I_TE_CLE_3               AD_ADRESSE.I_TE_CLE_3%TYPE,
    V_AD_TELEPHONE_3         AD_ADRESSE.V_AD_TELEPHONE_3%TYPE,
    I_AD_ST_CLE              AD_ADRESSE.I_ST_CLE%TYPE,
    V_AD_COMMENTAIRE         AD_ADRESSE.V_AD_COMMENTAIRE%TYPE,
    V_AD_CREE_PAR            AD_ADRESSE.V_AD_CREE_PAR%TYPE,
    D_AD_DATE_CREATION       AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
    V_AD_MODIFIE_PAR         AD_ADRESSE.V_AD_MODIFIE_PAR%TYPE,
    D_AD_DATE_MODIFICATION   AD_ADRESSE.D_AD_DATE_MODIFICATION%TYPE,
    L_AD_REF_SITE            AD_ADRESSE.L_AD_REF_SITE%TYPE,
    C_AD_REF_GENRE           AD_ADRESSE.C_AD_REF_GENRE%TYPE,
    I_PA_CLE                 PA_PAYS.I_PA_CLE%TYPE,
    L_PR_CLE                 PR_PROVINCE.L_PR_CLE%TYPE);
  TYPE DTS_SO_SOCIETE_AD_ADRESSE IS REF CURSOR RETURN REC_SO_SOCIETE_AD_ADRESSE;
  PROCEDURE Sp_L_So_Societe_Ad_Adresse(NEW_L_SI_CLE            IN SO_SOCIETE.L_SI_CLE%TYPE,
                                       NEW_DATE_CREATION_DEBUT IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                       NEW_DATE_CREATION_FIN   IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                       rc1                     IN OUT DTS_SO_SOCIETE_AD_ADRESSE);
  TYPE REC_FICHIER IS RECORD(
    V_MM_EXTENSION  MM_MULTIMEDIA.V_MM_EXTENSION%TYPE,
    I_TM_CLE        MM_MULTIMEDIA.I_TM_CLE%TYPE,
    L_LMM_REFERENCE LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
    L_LMM_REF_SITE  LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
    C_LMM_REF_GENRE LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE);
  TYPE DTS_FICHIER IS REF CURSOR RETURN REC_FICHIER;

  PROCEDURE SP_L_LIRE_FICHIER(NEW_L_EM_CLE IN MM_MULTIMEDIA.L_EM_CLE%TYPE,
                              NEW_L_SI_CLE IN MM_MULTIMEDIA.L_SI_CLE%TYPE,
                              rc1          OUT DTS_FICHIER);

  TYPE REC_LIEN_BILLET IS RECORD(
    L_LDD_CLE             LDD_LIEN_DOSSIER.L_LDD_CLE%TYPE,
    L_SI_CLE              LDD_LIEN_DOSSIER.L_SI_CLE%TYPE,
    I_RO_CLE              LDD_LIEN_DOSSIER.I_RO_CLE%TYPE,
    L_LDD_DOSSIER_ASSOCIE LDD_LIEN_DOSSIER.L_LDD_DOSSIER_ASSOCIE%TYPE,
    L_LDD_SITE            LDD_LIEN_DOSSIER.L_LDD_SITE%TYPE);
  TYPE DTS_LIEN_BILLET IS REF CURSOR RETURN REC_LIEN_BILLET;

  PROCEDURE SP_L_LIEN_BILLET_PRESENTE(NEW_L_DO_CLE IN DO_DOSSIER.L_DO_CLE%TYPE,
                                      NEW_L_SI_CLE IN DO_DOSSIER.L_SI_CLE%TYPE,
                                      rc1          OUT DTS_LIEN_BILLET);

  PROCEDURE SP_L_LIEN_BILLET_REQUIS(NEW_L_DO_CLE IN DO_DOSSIER.L_DO_CLE%TYPE,
                                    NEW_L_SI_CLE IN DO_DOSSIER.L_SI_CLE%TYPE,
                                    rc1          OUT DTS_LIEN_BILLET);

  TYPE DTS_AI_AIDE IS REF CURSOR RETURN AI_AIDE%ROWTYPE;

  PROCEDURE SP_L_AIDE_CHAMP(NEW_V_AI_CHAMP IN AI_AIDE.V_AI_CHAMP%TYPE,
                            NEW_I_LA_CLE   IN AI_AIDE.I_LA_CLE%TYPE,
                            rc1            OUT DTS_AI_AIDE);

  PROCEDURE SP_L_AIDE_VALEUR(NEW_L_AI_VALEUR IN AI_AIDE.L_AI_VALEUR%TYPE,
                             NEW_I_LA_CLE    IN AI_AIDE.I_LA_CLE%TYPE,
                             rc1             OUT DTS_AI_AIDE);

  TYPE REC_CONSIGNATION_APPROBATION IS RECORD(
    V_CN_APPROUVE_PAR     CN_CONSIGNATION.V_CN_APPROUVE_PAR%TYPE,
    D_CN_DATE_APPROBATION CN_CONSIGNATION.D_CN_DATE_APPROBATION%TYPE,
    C_CN_APPROUVE         CN_CONSIGNATION.C_CN_APPROUVE%TYPE);
  TYPE DTS_CONSIGNATION_APPROBATION IS REF CURSOR RETURN REC_CONSIGNATION_APPROBATION;

  PROCEDURE SP_L_CN_CONSIGNATION_APP(NEW_I_TN_CLE          IN CN_CONSIGNATION.I_TN_CLE%TYPE,
                                     NEW_V_CN_NUMERO_SERIE IN CN_CONSIGNATION.V_CN_NUMERO_SERIE%TYPE,
                                     rc1                   OUT DTS_CONSIGNATION_APPROBATION);

  TYPE DTS_SU_SUJET IS REF CURSOR RETURN SU_SUJET%ROWTYPE;
  PROCEDURE SP_L_SU_SUJET_EXISTANT(NEW_V_SU_PRENOM         IN SU_SUJET.V_SU_PRENOM%TYPE,
                                   NEW_V_SU_NOM            IN SU_SUJET.V_SU_NOM%TYPE,
                                   NEW_D_SU_DATE_NAISSANCE IN SU_SUJET.D_SU_DATE_NAISSANCE%TYPE,
                                   rc1                     OUT DTS_SU_SUJET);

  TYPE DTS_EV_EVALUATION IS REF CURSOR RETURN EV_EVALUATION%ROWTYPE;
  PROCEDURE SP_L_EV_EVALUATION(NEW_L_EV_REFERENCE IN EV_EVALUATION.L_EV_REF_CLE%TYPE,
                               NEW_L_EV_REF_SITE  IN EV_EVALUATION.L_EV_REF_SITE%TYPE,
                               rc1                IN OUT DTS_EV_EVALUATION);
  PROCEDURE SP_L2_EV_EVALUATION(NEW_L_EV_CLE IN EV_EVALUATION.L_EV_CLE%TYPE,
                               NEW_L_SI_CLE IN EV_EVALUATION.L_SI_CLE%TYPE,
                               rc1          IN OUT DTS_EV_EVALUATION);

  TYPE DTS_LME_LIEN_MISE_EVAL IS REF CURSOR RETURN LME_LIEN_MISE_EVAL%ROWTYPE;
  PROCEDURE SP_L_LME_LIEN_MISE_EVAL(NEW_L_EV_CLE IN LME_LIEN_MISE_EVAL.L_EV_CLE%TYPE,
                               NEW_L_EV_SI_CLE  IN LME_LIEN_MISE_EVAL.L_EV_SI_CLE%TYPE,
                               rc1                IN OUT DTS_LME_LIEN_MISE_EVAL);

  TYPE REC_ADRESSE_RDD IS RECORD(
    L_SO_CLE                   SO_SOCIETE.L_SO_CLE%TYPE,
    L_SI_CLE                   SO_SOCIETE.L_SI_CLE%TYPE,
    NO_CIVIQUE                 VARCHAR(10),
    TYPE_RUE_DESC_LONGUE       NUMBER,
    NOM_RUE                    VARCHAR(30),
    POINT_CARDINAL_DESC_LONGUE NUMBER,
    NO_UNITE                   VARCHAR(5),
    L_VI_CLE                   VI_VILLE.L_VI_CLE%TYPE,
    CODE_POSTAL                VARCHAR(15),
    AFFAIRE                    VARCHAR(30),
    FAX                        VARCHAR(30),
    SANS_FRAIS                 VARCHAR(30),
    EMAIL                      VARCHAR(100));
  TYPE DTS_ADRESSE_RDD IS REF CURSOR RETURN REC_ADRESSE_RDD;
  PROCEDURE SP_L_ADRESSE_RDD(rc1 IN OUT DTS_ADRESSE_RDD);

  TYPE REC_UR_URGENCE2 IS RECORD(
    L_UR_CLE              UR_URGENCE.L_UR_CLE%TYPE,
    L_SI_CLE              UR_URGENCE.L_SI_CLE%TYPE,
    I_CL_CLE              UR_URGENCE.I_CL_CLE%TYPE,
    L_SO_REF_CLE          UR_URGENCE.L_SO_REF_CLE%TYPE,
    L_SO_REF_SITE         UR_URGENCE.L_SO_REF_SITE%TYPE,
    V_UR_UNITE            UR_URGENCE.V_UR_UNITE%TYPE,
    V_UR_DISTRICT         UR_URGENCE.V_UR_DISTRICT%TYPE,
    V_UR_CONTACT          UR_URGENCE.V_UR_CONTACT%TYPE,
    V_UR_CONTACT_PRENOM   UR_URGENCE.V_UR_CONTACT_PRENOM%TYPE,
    V_UR_FONCTION         UR_URGENCE.V_UR_FONCTION%TYPE,
    V_UR_MATRICULE        UR_URGENCE.V_UR_MATRICULE%TYPE,
    V_UR_TELEPHONE        UR_URGENCE.V_UR_TELEPHONE%TYPE,
    L_UR_POSTE            UR_URGENCE.L_UR_POSTE%TYPE,
    V_UR_TELECOPIEUR      UR_URGENCE.V_UR_TELECOPIEUR%TYPE,
    V_UR_VILLE            UR_URGENCE.V_UR_VILLE%TYPE,
    V_UR_COURRIEL         UR_URGENCE.V_UR_COURRIEL%TYPE,
    V_UR_EVENEMENT        UR_URGENCE.V_UR_EVENEMENT%TYPE,
    V_UR_REPONDANT        UR_URGENCE.V_UR_REPONDANT%TYPE,
    L_UR_MOTIF            UR_URGENCE.L_UR_MOTIF%TYPE,
    I_ST_CLE              UR_URGENCE.I_ST_CLE%TYPE,
    D_UR_DATE_CREATION    UR_URGENCE.D_UR_DATE_CREATION%TYPE,
    V_UR_CREE_PAR         UR_URGENCE.V_UR_CREE_PAR%TYPE,
    L_UR_REF_CLE          UR_URGENCE.L_UR_REF_CLE%TYPE,
    L_UR_REF_SITE         UR_URGENCE.L_UR_REF_SITE%TYPE,
    V_SO_NOM              SO_SOCIETE.V_SO_NOM%TYPE);
  TYPE DTS_UR_URGENCE2 IS REF CURSOR RETURN REC_UR_URGENCE2;
  PROCEDURE SP_L3_UR_URGENCE(NEW_L_UR_REF_CLE  IN UR_URGENCE.L_UR_REF_CLE%TYPE,
                             NEW_L_UR_REF_SITE IN UR_URGENCE.L_UR_REF_SITE%TYPE,
                             rc1               IN OUT DTS_UR_URGENCE2);
  PROCEDURE SP_L_UR_URGENCE(NEW_L_UR_CLE IN UR_URGENCE.L_UR_CLE%TYPE,
                            NEW_L_SI_CLE IN SI_SITE.L_SI_CLE%TYPE,
                            rc1          IN OUT DTS_UR_URGENCE2);

  TYPE DTS_UR_URGENCE IS REF CURSOR RETURN UR_URGENCE%ROWTYPE;
  PROCEDURE SP_L2_UR_URGENCE(NEW_L_SO_REF_CLE  IN UR_URGENCE.L_SO_REF_CLE%TYPE,
                             NEW_L_SO_REF_SITE IN UR_URGENCE.L_SO_REF_SITE%TYPE,
                             rc1               IN OUT DTS_UR_URGENCE);

  TYPE REC_VE_VEHICULE_EXISTANT IS RECORD(
    V_VE_IMMATRICULATION VE_VEHICULE.V_VE_IMMATRICULATION%TYPE,
    V_MD_MODELE          MD_MODELE.V_MD_MODELE%TYPE,
    D_VE_DATE_CREATION   VE_VEHICULE.D_VE_DATE_CREATION%TYPE);
  TYPE DTS_VE_VEHICULE_EXISTANT IS REF CURSOR RETURN REC_VE_VEHICULE_EXISTANT;
  PROCEDURE SP_L_VE_VEHICULE_EXISTANT(NEW_V_VE_IMMATRICULATION IN VE_VEHICULE.V_VE_IMMATRICULATION%TYPE,
                                      NEW_I_MD_CLE             IN VE_VEHICULE.I_MD_CLE%TYPE,
                                      rc1                      OUT DTS_VE_VEHICULE_EXISTANT);

  TYPE REC2_AD_ADRESSE_EMPLOYE IS RECORD(
    L_AD_CLE               AD_ADRESSE.L_AD_CLE%TYPE,
    L_SI_CLE               AD_ADRESSE.L_SI_CLE%TYPE,
    L_AD_REFERENCE         AD_ADRESSE.L_AD_REFERENCE%TYPE,
    V_AD_ADRESSE           AD_ADRESSE.V_AD_ADRESSE%TYPE,
    V_AD_ADRESSE2          AD_ADRESSE.V_AD_ADRESSE2%TYPE,
    V_AD_NUM_MUNICIPAL     AD_ADRESSE.V_AD_NUM_MUNICIPAL%TYPE,
    L_AD_TYPE_RUE          AD_ADRESSE.L_AD_TYPE_RUE%TYPE,
    V_AD_NOM_RUE           AD_ADRESSE.V_AD_NOM_RUE%TYPE,
    L_AD_POINT_CARDINAL    AD_ADRESSE.L_AD_POINT_CARDINAL%TYPE,
    L_AD_TYPE_UNITE        AD_ADRESSE.L_AD_TYPE_UNITE%TYPE,
    V_AD_NO_UNITE          AD_ADRESSE.V_AD_NO_UNITE%TYPE,
    V_AD_ADRESSE_POST      AD_ADRESSE.V_AD_ADRESSE_POST%TYPE,
    V_AD_ELECTRONIQUE_1    AD_ADRESSE.V_AD_ELECTRONIQUE_1%TYPE,
    V_AD_ELECTRONIQUE_2    AD_ADRESSE.V_AD_ELECTRONIQUE_2%TYPE,
    L_VI_CLE               AD_ADRESSE.L_VI_CLE%TYPE,
    V_AD_CODE_POSTAL       AD_ADRESSE.V_AD_CODE_POSTAL%TYPE,
    I_TE_CLE_1             AD_ADRESSE.I_TE_CLE_1%TYPE,
    V_AD_TELEPHONE_1       AD_ADRESSE.V_AD_TELEPHONE_1%TYPE,
    I_TE_CLE_2             AD_ADRESSE.I_TE_CLE_2%TYPE,
    V_AD_TELEPHONE_2       AD_ADRESSE.V_AD_TELEPHONE_2%TYPE,
    I_TE_CLE_3             AD_ADRESSE.I_TE_CLE_3%TYPE,
    V_AD_TELEPHONE_3       AD_ADRESSE.V_AD_TELEPHONE_3%TYPE,
    I_ST_CLE               AD_ADRESSE.I_ST_CLE%TYPE,
    V_AD_COMMENTAIRE       AD_ADRESSE.V_AD_COMMENTAIRE%TYPE,
    V_AD_CREE_PAR          AD_ADRESSE.V_AD_CREE_PAR%TYPE,
    D_AD_DATE_CREATION     AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
    V_AD_MODIFIE_PAR       AD_ADRESSE.V_AD_MODIFIE_PAR%TYPE,
    D_AD_DATE_MODIFICATION AD_ADRESSE.D_AD_DATE_MODIFICATION%TYPE,
    L_AD_REF_SITE          AD_ADRESSE.L_AD_REF_SITE%TYPE,
    C_AD_REF_GENRE         AD_ADRESSE.C_AD_REF_GENRE%TYPE,
    I_PA_CLE               PA_PAYS.I_PA_CLE%TYPE,
    L_PR_CLE               PR_PROVINCE.L_PR_CLE%TYPE,
    V_VI_VILLE             VI_VILLE.V_VI_VILLE%TYPE,
    B_AD_IND_RDD           AD_ADRESSE.B_AD_IND_RDD%TYPE,
    I_CL_CLASSE            SO_SOCIETE.I_CL_CLE%TYPE,
    I_AD_TEL_PERIODE_1     AD_ADRESSE.I_AD_TEL_PERIODE_1%TYPE,
    I_AD_TEL_PERIODE_2     AD_ADRESSE.I_AD_TEL_PERIODE_2%TYPE,
    I_AD_TEL_PERIODE_3     AD_ADRESSE.I_AD_TEL_PERIODE_3%TYPE);
  TYPE DTS3_AD_ADRESSE_EMPLOYE IS REF CURSOR RETURN REC2_AD_ADRESSE_EMPLOYE;
  PROCEDURE Sp_L4_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE_EMPLOYE);
  PROCEDURE Sp_L4_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             NEW_DATE           IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE_EMPLOYE);

  TYPE REC_SUJET_RDD_RESP_SOCIETE_RDD IS RECORD(CLE SO_SOCIETE.L_SO_CLE%TYPE,
                            SITE                  SO_SOCIETE.L_SI_CLE%TYPE,
                            SUJET_NOM             SU_SUJET.V_SU_NOM%TYPE,
                            SUJET_PRENOM          SU_SUJET.V_SU_PRENOM%TYPE,
                            LIEN_DATE_CREATION    LDD_LIEN_DOSSIER.D_LDD_DATE_CREATION%TYPE);
  TYPE DTS_SUJET_RDD_RESP_SOCIETE_RDD IS REF CURSOR RETURN REC_SUJET_RDD_RESP_SOCIETE_RDD;
PROCEDURE SP_SUJET_RDD_RESP_SOCIETE_RDD(rc1 IN OUT DTS_SUJET_RDD_RESP_SOCIETE_RDD);

  TYPE REC_SOCIETERDD_RESP_SOCIETERDD IS RECORD(CLE SO_SOCIETE.L_SO_CLE%TYPE,
                            SITE                  SO_SOCIETE.L_SI_CLE%TYPE,
                            PRENOM                SO_SOCIETE.V_SO_REFERENCE_PRENOM%TYPE,
                            NOM                   SO_SOCIETE.V_SO_REFERENCE_NOM%TYPE,
                            RESPONSABLE_CLE       SO_SOCIETE.L_SO_CLE%TYPE,
                            RESPONSABLE_SITE      SO_SOCIETE.L_SI_CLE%TYPE,
                            RESPONSABLE_NOM       SO_SOCIETE.V_SO_NOM%TYPE,
                            DATE_CREATION_DOSSIER LDD_LIEN_DOSSIER.D_LDD_DATE_CREATION%TYPE);
  TYPE DTS_SOCIETERDD_RESP_SOCIETERDD IS REF CURSOR RETURN REC_SOCIETERDD_RESP_SOCIETERDD;
PROCEDURE SP_SOCIETERDD_RESP_SOCIETERDD(rc1 IN OUT DTS_SOCIETERDD_RESP_SOCIETERDD);

END Cardex_Lire_Lien;
/
CREATE OR REPLACE PACKAGE BODY Cardex_Lire_Lien IS
  PROCEDURE SP_L_Lpv_Lien_Particularite(NEW_L_VE_CLE        IN LPV_LIEN_PARTICULARITE.L_VE_CLE%TYPE,
                                        NEW_L_LPV_REF_SITE  IN LPV_LIEN_PARTICULARITE.L_LPV_REF_SITE%TYPE,
                                        NEW_C_LPV_REF_GENRE IN LPV_LIEN_PARTICULARITE.C_LPV_REF_GENRE%TYPE,
                                        rc1                 IN OUT DTS_LPV_LIEN_PARTICULARITE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_LPV_CLE,
             P.L_SI_CLE,
             P.L_VE_CLE,
             P.I_PT_CLE,
             P.V_LPV_CREE_PAR,
             P.D_LPV_DATE_CREATION,
             P.L_LPV_REF_SITE,
             P.C_LPV_REF_GENRE
        FROM LPV_LIEN_PARTICULARITE P
       WHERE P.L_LPV_REF_SITE = NEW_L_LPV_REF_SITE
         AND P.C_LPV_REF_GENRE = NEW_C_LPV_REF_GENRE
         AND P.L_VE_CLE = NEW_L_VE_CLE;
  END SP_L_Lpv_Lien_Particularite;
  PROCEDURE SP_L_Ldd_Lien_Dossier(NEW_L_DO_CLE   IN LDD_LIEN_DOSSIER.L_DO_CLE%TYPE,
                                  NEW_L_DO_SITE  IN LDD_LIEN_DOSSIER.L_DO_SITE%TYPE,
                                  NEW_C_DO_GENRE IN LDD_LIEN_DOSSIER.C_DO_GENRE%TYPE,
                                  rc1            IN OUT DTS_LDD_LIEN_DOSSIER) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_LDD_CLE,
             P.L_SI_CLE,
             P.L_DO_CLE,
             P.L_LDD_DOSSIER_ASSOCIE,
             P.I_RO_CLE,
             P.I_TL_CLE,
             P.V_LDD_CREE_PAR,
             P.D_LDD_DATE_CREATION,
             P.L_DO_SITE,
             P.C_DO_GENRE,
             P.L_LDD_SITE,
             P.C_LDD_GENRE
        FROM LDD_LIEN_DOSSIER P
       WHERE P.L_DO_SITE = NEW_L_DO_SITE
         AND P.C_DO_GENRE = NEW_C_DO_GENRE
         AND P.L_DO_CLE = NEW_L_DO_CLE;
  END SP_L_Ldd_Lien_Dossier;

  PROCEDURE SP_L_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                            NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                            NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                            rc1                IN OUT DTS_AD_ADRESSE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_AD_CLE,
             P.L_SI_CLE,
             P.L_AD_REFERENCE,
             P.V_AD_ADRESSE,
             P.V_AD_ADRESSE2,
             P.L_VI_CLE,
             P.V_AD_CODE_POSTAL,
             P.V_AD_TELEPHONE_1,
             P.V_AD_TELEPHONE_2,
             P.V_AD_TELEPHONE_3,
             P.I_ST_CLE,
             P.V_AD_COMMENTAIRE,
             P.V_AD_CREE_PAR,
             P.D_AD_DATE_CREATION,
             P.V_AD_MODIFIE_PAR,
             P.D_AD_DATE_MODIFICATION,
             P.L_AD_REF_SITE,
             P.C_AD_REF_GENRE,
             P.V_AD_NUM_MUNICIPAL,
             P.L_AD_TYPE_RUE,
             P.V_AD_NOM_RUE,
             P.L_AD_POINT_CARDINAL,
             P.L_AD_TYPE_UNITE,
             P.V_AD_NO_UNITE,
             P.V_AD_ADRESSE_POST,
             P.V_AD_ELECTRONIQUE_1,
             P.V_AD_ELECTRONIQUE_2,
             P.I_TE_CLE_1,
             P.I_TE_CLE_2,
             P.I_TE_CLE_3,
             P.L_PR_CLE,
             P.I_PA_CLE,
             P.I_CC_CLE,
             P.B_AD_IND_RDD,
             P.I_AD_TEL_PERIODE_1,
             P.I_AD_TEL_PERIODE_2,
             P.I_AD_TEL_PERIODE_3
        FROM AD_ADRESSE P
       WHERE P.L_AD_REF_SITE = NEW_L_AD_REF_SITE
         AND P.C_AD_REF_GENRE = NEW_C_AD_REF_GENRE
         AND P.L_AD_REFERENCE = NEW_L_AD_REFERENCE;
  END SP_L_Ad_Adresse;
  PROCEDURE SP_L2_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             rc1                IN OUT DTS2_AD_ADRESSE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_AD_CLE,
             P.L_SI_CLE,
             P.L_AD_REFERENCE,
             P.V_AD_ADRESSE,
             P.V_AD_ADRESSE2,
             P.V_AD_NUM_MUNICIPAL,
             P.L_AD_TYPE_RUE,
             P.V_AD_NOM_RUE,
             P.L_AD_POINT_CARDINAL,
             P.L_AD_TYPE_UNITE,
             P.V_AD_NO_UNITE,
             P.V_AD_ADRESSE_POST,
             P.V_AD_ELECTRONIQUE_1,
             P.V_AD_ELECTRONIQUE_2,
             P.L_VI_CLE,
             P.V_AD_CODE_POSTAL,
             P.I_TE_CLE_1,
             P.I_AD_TEL_PERIODE_1,
             P.V_AD_TELEPHONE_1,
             P.I_TE_CLE_2,
             P.I_AD_TEL_PERIODE_3,
             P.V_AD_TELEPHONE_2,
             P.I_TE_CLE_3,
             P.I_AD_TEL_PERIODE_3,
             P.V_AD_TELEPHONE_3,
             P.I_ST_CLE,
             P.V_AD_COMMENTAIRE,
             P.V_AD_CREE_PAR,
             P.D_AD_DATE_CREATION,
             P.V_AD_MODIFIE_PAR,
             P.D_AD_DATE_MODIFICATION,
             P.L_AD_REF_SITE,
             P.C_AD_REF_GENRE,
             P.I_PA_CLE,
             P.L_PR_CLE,
             P.B_AD_IND_RDD
        FROM AD_ADRESSE P
       WHERE P.L_AD_REF_SITE = NEW_L_AD_REF_SITE
         AND P.C_AD_REF_GENRE = NEW_C_AD_REF_GENRE
         AND P.L_AD_REFERENCE = NEW_L_AD_REFERENCE;
  END SP_L2_Ad_Adresse;
  PROCEDURE SP_L_Ad_Adresse(NEW_L_AD_CLE AD_ADRESSE.L_AD_CLE%TYPE,
                            NEW_L_SI_CLE AD_ADRESSE.L_SI_CLE%TYPE,
                            rc1          IN OUT DTS2_AD_ADRESSE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_AD_CLE,
             P.L_SI_CLE,
             P.L_AD_REFERENCE,
             P.V_AD_ADRESSE,
             P.V_AD_ADRESSE2,
             P.V_AD_NUM_MUNICIPAL,
             P.L_AD_TYPE_RUE,
             P.V_AD_NOM_RUE,
             P.L_AD_POINT_CARDINAL,
             P.L_AD_TYPE_UNITE,
             P.V_AD_NO_UNITE,
             P.V_AD_ADRESSE_POST,
             P.V_AD_ELECTRONIQUE_1,
             P.V_AD_ELECTRONIQUE_2,
             P.L_VI_CLE,
             P.V_AD_CODE_POSTAL,
             P.I_TE_CLE_1,
             P.I_AD_TEL_PERIODE_1,
             P.V_AD_TELEPHONE_1,
             P.I_TE_CLE_2,
             P.I_AD_TEL_PERIODE_2,
             P.V_AD_TELEPHONE_2,
             P.I_TE_CLE_3,
             P.I_AD_TEL_PERIODE_3,
             P.V_AD_TELEPHONE_3,
             P.I_ST_CLE,
             P.V_AD_COMMENTAIRE,
             P.V_AD_CREE_PAR,
             P.D_AD_DATE_CREATION,
             P.V_AD_MODIFIE_PAR,
             P.D_AD_DATE_MODIFICATION,
             P.L_AD_REF_SITE,
             P.C_AD_REF_GENRE,
             P.I_PA_CLE,
             P.L_PR_CLE,
             P.B_AD_IND_RDD
        FROM AD_ADRESSE P
       WHERE P.L_AD_CLE = NEW_L_AD_CLE
         AND P.L_SI_CLE = NEW_L_SI_CLE;
  END SP_L_Ad_Adresse;

  --Lecture des données actuelles
  PROCEDURE SP_L3_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_AD_CLE,
             P.L_SI_CLE,
             P.L_AD_REFERENCE,
             P.V_AD_ADRESSE,
             P.V_AD_ADRESSE2,
             P.V_AD_NUM_MUNICIPAL,
             P.L_AD_TYPE_RUE,
             P.V_AD_NOM_RUE,
             P.L_AD_POINT_CARDINAL,
             P.L_AD_TYPE_UNITE,
             P.V_AD_NO_UNITE,
             P.V_AD_ADRESSE_POST,
             P.V_AD_ELECTRONIQUE_1,
             P.V_AD_ELECTRONIQUE_2,
             P.L_VI_CLE,
             P.V_AD_CODE_POSTAL,
             P.I_TE_CLE_1,
             P.V_AD_TELEPHONE_1,
             P.I_TE_CLE_2,
             P.V_AD_TELEPHONE_2,
             P.I_TE_CLE_3,
             P.V_AD_TELEPHONE_3,
             P.I_ST_CLE,
             P.V_AD_COMMENTAIRE,
             P.V_AD_CREE_PAR,
             P.D_AD_DATE_CREATION,
             P.V_AD_MODIFIE_PAR,
             P.D_AD_DATE_MODIFICATION,
             P.L_AD_REF_SITE,
             P.C_AD_REF_GENRE,
             P.I_PA_CLE,
             P.L_PR_CLE,
             P.L_VI_CLE,
             P.B_AD_IND_RDD,
             P.I_AD_TEL_PERIODE_1,
             P.I_AD_TEL_PERIODE_2,
             P.I_AD_TEL_PERIODE_3
        FROM AD_ADRESSE P
       WHERE P.L_AD_REF_SITE = NEW_L_AD_REF_SITE
         AND P.C_AD_REF_GENRE = NEW_C_AD_REF_GENRE
         AND P.L_AD_REFERENCE = NEW_L_AD_REFERENCE
       ORDER BY P.D_AD_DATE_CREATION DESC;
  END SP_L3_Ad_Adresse;

  --Lecture des données historiques
  PROCEDURE SP_L3_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             NEW_DATE           IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_AD_CLE,
             P.L_SI_CLE,
             P.L_AD_REFERENCE,
             P.V_AD_ADRESSE,
             P.V_AD_ADRESSE2,
             P.V_AD_NUM_MUNICIPAL,
             P.L_AD_TYPE_RUE,
             P.V_AD_NOM_RUE,
             P.L_AD_POINT_CARDINAL,
             P.L_AD_TYPE_UNITE,
             P.V_AD_NO_UNITE,
             P.V_AD_ADRESSE_POST,
             P.V_AD_ELECTRONIQUE_1,
             P.V_AD_ELECTRONIQUE_2,
             P.L_VI_CLE,
             P.V_AD_CODE_POSTAL,
             P.I_TE_CLE_1,
             P.V_AD_TELEPHONE_1,
             P.I_TE_CLE_2,
             P.V_AD_TELEPHONE_2,
             P.I_TE_CLE_3,
             P.V_AD_TELEPHONE_3,
             P.I_ST_CLE,
             P.V_AD_COMMENTAIRE,
             P.V_AD_CREE_PAR,
             P.D_AD_DATE_CREATION,
             P.V_AD_MODIFIE_PAR,
             P.D_AD_DATE_MODIFICATION,
             P.L_AD_REF_SITE,
             P.C_AD_REF_GENRE,
             P.I_PA_CLE,
             P.L_PR_CLE,
             P.L_VI_CLE,
             P.B_AD_IND_RDD,
             P.I_AD_TEL_PERIODE_1,
             P.I_AD_TEL_PERIODE_2,
             P.I_AD_TEL_PERIODE_3
        FROM AD_ADRESSE P
       WHERE P.L_AD_REF_SITE = NEW_L_AD_REF_SITE
         AND P.C_AD_REF_GENRE = NEW_C_AD_REF_GENRE
         AND P.L_AD_REFERENCE = NEW_L_AD_REFERENCE
         AND P.D_AD_DATE_CREATION <=
             (SELECT MAX(A2.D_AD_DATE_CREATION)
                FROM AD_ADRESSE A2
               WHERE A2.L_AD_REFERENCE = P.L_AD_REFERENCE
                 AND A2.L_AD_REF_SITE = P.L_AD_REF_SITE
                 AND A2.C_AD_REF_GENRE = P.C_AD_REF_GENRE
                    --On ajoute un jour pour permettre des changements 24 heures après la liaison
                 AND A2.D_AD_DATE_CREATION <= NVL(NEW_DATE, SYSDATE) + 1)
       ORDER BY P.D_AD_DATE_CREATION DESC;
  END SP_L3_Ad_Adresse;

  PROCEDURE SP_L_Lsc_Caracteristique(NEW_L_LSC_REFERENCE IN LSC_CARACTERISTIQUE.L_LSC_REFERENCE%TYPE,
                                     NEW_L_LSC_REF_SITE  IN LSC_CARACTERISTIQUE.L_LSC_REF_SITE%TYPE,
                                     NEW_C_LSC_REF_GENRE IN LSC_CARACTERISTIQUE.C_LSC_REF_GENRE%TYPE,
                                     rc1                 IN OUT DTS_LSC_CARACTERISTIQUE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_LSC_CLE,
             P.L_SI_CLE,
             P.L_CR_CLE,
             P.L_LSC_REFERENCE,
             P.V_LSC_CREE_PAR,
             P.D_LSC_DATE_CREATION,
             P.L_LSC_REF_SITE,
             P.C_LSC_REF_GENRE
        FROM LSC_CARACTERISTIQUE P
       WHERE P.L_LSC_REF_SITE = NEW_L_LSC_REF_SITE
         AND P.C_LSC_REF_GENRE = NEW_C_LSC_REF_GENRE
         AND P.L_LSC_REFERENCE = NEW_L_LSC_REFERENCE;
  END SP_L_Lsc_Caracteristique;
  PROCEDURE SP_L_Ljd_Lien_Jeu_Dossier(NEW_L_DO_CLE        IN LJD_LIEN_JEU_DOSSIER.L_DO_CLE%TYPE,
                                      NEW_L_LJD_REF_SITE  IN LJD_LIEN_JEU_DOSSIER.L_LJD_REF_SITE%TYPE,
                                      NEW_C_LJD_REF_GENRE IN LJD_LIEN_JEU_DOSSIER.C_LJD_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS_LJD_LIEN_JEU_DOSSIER) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_LJD_CLE,
             P.L_SI_CLE,
             P.L_DO_CLE,
             P.I_JE_CLE,
             P.V_LJD_CREE_PAR,
             P.D_LJD_DATE_CREATION,
             P.L_LJD_REF_SITE,
             P.C_LJD_REF_GENRE
        FROM LJD_LIEN_JEU_DOSSIER P
       WHERE P.L_LJD_REF_SITE = NEW_L_LJD_REF_SITE
         AND P.C_LJD_REF_GENRE = NEW_C_LJD_REF_GENRE
         AND P.L_DO_CLE = NEW_L_DO_CLE;
  END SP_L_Ljd_Lien_Jeu_Dossier;

  --Cette prodécure est appelée par le bouton Narrations dans le menu principal.
  --Elle sert surtout à rechercher les narrations qui ne sont pas encore approuvées.
  /*PROCEDURE SP_Rap_Co_Approuve(
     NEW_V_CO_INTERVENANT IN CO_COMMENTAIRE.V_CO_CREE_PAR%TYPE,
     NEW_DATE_CREATION_DEBUT IN CO_COMMENTAIRE.D_CO_DATE_CREATION%TYPE,
     NEW_DATE_CREATION_FIN IN CO_COMMENTAIRE.D_CO_DATE_CREATION%TYPE,
     NEW_DATE_APPROBATION_DEBUT IN CO_COMMENTAIRE.D_CO_DATE_CREATION%TYPE,
     NEW_DATE_APPROBATION_FIN IN CO_COMMENTAIRE.D_CO_DATE_CREATION%TYPE,
     NEW_V_CO_APPROBATEUR IN CO_COMMENTAIRE.V_CO_APPROBATEUR%TYPE,
     NEW_SITE_INTERVENANT IN VARCHAR2,
     NEW_SECTEUR IN SECURITY_GROUPINGS.GROUP_NAME%TYPE,
     rc1 IN OUT DTS_RAP_CO_COMMENTAIRE) IS
       BEGIN
            OPEN rc1 FOR SELECT
                  P.L_CO_CLE,
                  P.L_SI_CLE,
                  P.L_CO_REFERENCE,
                  P.V_CO_COMMENTAIRE,
                  P.V_CO_CREE_PAR,
                  P.D_CO_DATE_CREATION,
                  P.V_CO_MODIFIE_PAR,
                  P.D_CO_MODIFICATION,
                  P.R_CO_MONTANT,
                  P.L_CO_REF_SITE,
                  P.C_CO_REF_GENRE,
              P.I_CC_COMMENTAIRE,
              P.I_NH_COMMENTAIRE,
              P.I_CC_CREATEUR,
              P.I_NH_CREATEUR,
              P.V_CO_APPROBATEUR,
          P.I_CC_APPROBATEUR,
          P.I_NH_APPROBATEUR,
          P.D_CO_APPROBATION,
          P.V_CO_REFERENCE,
          P.V_CO_RAPPORTE_PAR,
          D.L_DO_CLE,
          D.L_SI_CLE,
          D.V_DO_MOT_PASSE,
          D.I_NA_CLE,
          D.I_CC_CLE,
          D.I_NH_CLE,
          D.V_DO_CREE_PAR,
          D.V_DO_NUMERO_DOSSIER
            FROM CO_COMMENTAIRE P, V_DO_DOSSIER_CA_TY D
            WHERE
          P.D_CO_DATE_CREATION >= NEW_DATE_CREATION_DEBUT AND
          TRUNC(P.D_CO_DATE_CREATION) <= TRUNC(NEW_DATE_CREATION_FIN) AND
          NVL(P.D_CO_APPROBATION,TO_DATE('18000101','YYYYMMDD')) >= NEW_DATE_APPROBATION_DEBUT AND
          TRUNC(NVL(P.D_CO_APPROBATION,SYSDATE)) <= TRUNC(NEW_DATE_APPROBATION_FIN) AND
          NVL(P.I_CC_COMMENTAIRE,Cardex_SPecial.g_code_confidentialite) <= Cardex_SPecial.g_code_confidentialite AND
          NVL(P.V_CO_APPROBATEUR,' ') LIKE NEW_V_CO_APPROBATEUR AND
          P.L_CO_REFERENCE = D.L_DO_CLE AND
          P.L_CO_REF_SITE = D.L_SI_CLE AND
          P.C_CO_REF_GENRE = 'DO' AND
          TO_CHAR(P.L_SI_CLE) LIKE NEW_SITE_INTERVENANT AND
          P.V_CO_CREE_PAR IN (SELECT USER_NAME FROM SECURITY_GROUPINGS WHERE
          GROUP_NAME LIKE NEW_SECTEUR AND USER_NAME LIKE NEW_V_CO_INTERVENANT);
  END SP_Rap_Co_Approuve;
  */
  --Nouvelle version plus performante de la procédure.
  PROCEDURE SP_L_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                     NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                     NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                     rc1                 IN OUT DTS_LMM_LIEN_MULTIMEDIA) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_LMM_CLE,
             P.L_SI_CLE,
             P.L_LMM_REFERENCE,
             P.L_MM_CLE,
             P.V_LMM_CREE_PAR,
             P.D_LMM_DATE_CREATION,
             P.V_LMM_MODIFIE_PAR,
             P.D_LMM_DATE_MODIFICATION,
             P.L_LMM_REF_SITE,
             P.C_LMM_REF_GENRE,
             P.L_MM_REF_SITE,
             P.I_CC_CLE
        FROM LMM_LIEN_MULTIMEDIA P
       WHERE P.L_LMM_REF_SITE = NEW_L_LMM_REF_SITE
         AND P.C_LMM_REF_GENRE = NEW_C_LMM_REF_GENRE
         AND P.L_LMM_REFERENCE = NEW_L_LMM_REFERENCE;
  END SP_L_Lmm_Lien_Multimedia;

  --Lecture des photos actuelles
  PROCEDURE SP_L2_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA) IS
  BEGIN
    OPEN rc1 FOR
      SELECT LMM.L_LMM_CLE,
             LMM.L_SI_CLE,
             LMM.L_LMM_REFERENCE,
             LMM.L_LMM_REF_SITE,
             LMM.C_LMM_REF_GENRE,
             LMM.L_MM_CLE,
             LMM.L_MM_REF_SITE,
             LMM.I_CC_CLE,
             MM.I_TM_CLE,
             MM.V_MM_DESCRIPTION,
             MM.L_EM_CLE,
             MM.L_EM_SI_CLE,
             MM.V_MM_CREE_PAR,
             MM.D_MM_DATE_CREATION,
             MM.V_MM_EXTENSION,
             MM.B_MM_SELECTIONNER
        FROM LMM_LIEN_MULTIMEDIA LMM, MM_MULTIMEDIA MM
       WHERE (MM.L_MM_CLE = LMM.L_MM_CLE)
         AND (LMM.L_MM_REF_SITE = MM.L_SI_CLE)
         AND ((LMM.L_LMM_REFERENCE = NEW_L_LMM_REFERENCE) AND
             (LMM.L_LMM_REF_SITE = NEW_L_LMM_REF_SITE) AND
             (LMM.C_LMM_REF_GENRE = NEW_C_LMM_REF_GENRE))
         AND MM.I_TM_CLE < 18826 --tout, sauf les documents annexes et les fichiers
       ORDER BY MM.D_MM_DATE_CREATION DESC;
  END SP_L2_Lmm_Lien_Multimedia;

  --Lecture des photos historiques
  PROCEDURE SP_L2_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      NEW_DATE            IN LMM_LIEN_MULTIMEDIA.D_LMM_DATE_CREATION%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA) IS
  BEGIN
    OPEN rc1 FOR
      SELECT LMM.L_LMM_CLE,
             LMM.L_SI_CLE,
             LMM.L_LMM_REFERENCE,
             LMM.L_LMM_REF_SITE,
             LMM.C_LMM_REF_GENRE,
             LMM.L_MM_CLE,
             LMM.L_MM_REF_SITE,
             LMM.I_CC_CLE,
             MM.I_TM_CLE,
             MM.V_MM_DESCRIPTION,
             MM.L_EM_CLE,
             MM.L_EM_SI_CLE,
             MM.V_MM_CREE_PAR,
             MM.D_MM_DATE_CREATION,
             MM.V_MM_EXTENSION,
             MM.B_MM_SELECTIONNER
        FROM LMM_LIEN_MULTIMEDIA LMM, MM_MULTIMEDIA MM
       WHERE (MM.L_MM_CLE = LMM.L_MM_CLE)
         AND (LMM.L_MM_REF_SITE = MM.L_SI_CLE)
         AND ((LMM.L_LMM_REFERENCE = NEW_L_LMM_REFERENCE) AND
             (LMM.L_LMM_REF_SITE = NEW_L_LMM_REF_SITE) AND
             (LMM.C_LMM_REF_GENRE = NEW_C_LMM_REF_GENRE))
         AND MM.I_TM_CLE < 18826 --tout, sauf les documents annexes et les fichiers
         AND LMM.D_LMM_DATE_CREATION <=
             (SELECT MAX(LMM2.D_LMM_DATE_CREATION)
                FROM LMM_LIEN_MULTIMEDIA LMM2
               WHERE LMM2.L_LMM_REFERENCE = LMM.L_LMM_REFERENCE
                 AND LMM2.L_LMM_REF_SITE = LMM.L_LMM_REF_SITE
                 AND LMM2.C_LMM_REF_GENRE = LMM.C_LMM_REF_GENRE
                    --On ajoute un jour pour permettre des changements 24 heures après la liaison
                 AND LmM2.D_LMM_DATE_CREATION <= NVL(NEW_DATE, SYSDATE) + 1)
       ORDER BY MM.D_MM_DATE_CREATION DESC;
  END SP_L2_Lmm_Lien_Multimedia;

  --Lecture des documents annexes seulement
  PROCEDURE SP_L3_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA) IS
  BEGIN
    OPEN rc1 FOR
      SELECT LMM.L_LMM_CLE,
             LMM.L_SI_CLE,
             LMM.L_LMM_REFERENCE,
             LMM.L_LMM_REF_SITE,
             LMM.C_LMM_REF_GENRE,
             LMM.L_MM_CLE,
             LMM.L_MM_REF_SITE,
             LMM.I_CC_CLE,
             MM.I_TM_CLE,
             MM.V_MM_DESCRIPTION,
             MM.L_EM_CLE,
             MM.L_EM_SI_CLE,
             MM.V_MM_CREE_PAR,
             MM.D_MM_DATE_CREATION,
             MM.V_MM_EXTENSION,
             MM.B_MM_SELECTIONNER
        FROM LMM_LIEN_MULTIMEDIA LMM, MM_MULTIMEDIA MM
       WHERE (MM.L_MM_CLE = LMM.L_MM_CLE)
         AND (LMM.L_MM_REF_SITE = MM.L_SI_CLE)
         AND ((LMM.L_LMM_REFERENCE = NEW_L_LMM_REFERENCE) AND
             (LMM.L_LMM_REF_SITE = NEW_L_LMM_REF_SITE) AND
             (LMM.C_LMM_REF_GENRE = NEW_C_LMM_REF_GENRE))
         AND MM.I_TM_CLE = 18826 --documents annexes
         AND (MM.V_MM_CREE_PAR = Cardex_SPecial.g_usager OR
             NVL(LMM.I_CC_CLE, Cardex_SPecial.g_code_confidentialite) <=
             Cardex_SPecial.g_code_confidentialite)
       ORDER BY MM.D_MM_DATE_CREATION DESC;
  END SP_L3_Lmm_Lien_Multimedia;

  --Lecture des fichiers seulement
  PROCEDURE SP_L4_Lmm_Lien_Multimedia(NEW_L_LMM_REFERENCE IN LMM_LIEN_MULTIMEDIA.L_LMM_REFERENCE%TYPE,
                                      NEW_L_LMM_REF_SITE  IN LMM_LIEN_MULTIMEDIA.L_LMM_REF_SITE%TYPE,
                                      NEW_C_LMM_REF_GENRE IN LMM_LIEN_MULTIMEDIA.C_LMM_REF_GENRE%TYPE,
                                      rc1                 IN OUT DTS2_LMM_LIEN_MULTIMEDIA) IS
  BEGIN
    OPEN rc1 FOR
      SELECT LMM.L_LMM_CLE,
             LMM.L_SI_CLE,
             LMM.L_LMM_REFERENCE,
             LMM.L_LMM_REF_SITE,
             LMM.C_LMM_REF_GENRE,
             LMM.L_MM_CLE,
             LMM.L_MM_REF_SITE,
             LMM.I_CC_CLE,
             MM.I_TM_CLE,
             MM.V_MM_DESCRIPTION,
             MM.L_EM_CLE,
             MM.L_EM_SI_CLE,
             MM.V_MM_CREE_PAR,
             MM.D_MM_DATE_CREATION,
             MM.V_MM_EXTENSION,
             MM.B_MM_SELECTIONNER
        FROM LMM_LIEN_MULTIMEDIA LMM, MM_MULTIMEDIA MM
       WHERE (MM.L_MM_CLE = LMM.L_MM_CLE)
         AND (LMM.L_MM_REF_SITE = MM.L_SI_CLE)
         AND ((LMM.L_LMM_REFERENCE = NEW_L_LMM_REFERENCE) AND
             (LMM.L_LMM_REF_SITE = NEW_L_LMM_REF_SITE) AND
             (LMM.C_LMM_REF_GENRE = NEW_C_LMM_REF_GENRE))
         AND MM.I_TM_CLE = 19616 --fichiers
       ORDER BY MM.D_MM_DATE_CREATION DESC;
  END SP_L4_Lmm_Lien_Multimedia;
  PROCEDURE SP_L_In_Intervenant(NEW_NAME IN IN_INTERVENANT.NAME%TYPE,
                                rc1      IN OUT DTS_IN_INTERVENANT) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_IN_CLE,
             P.L_SI_CLE,
             P.NAME,
             P.I_LA_CLE,
             P.I_ST_CLE,
             P.I_CC_CLE,
             P.I_NH_CLE,
             P.V_IN_NO_EMPLOYE,
             P.V_IN_NOM,
             P.V_IN_PRENOM,
             P.V_IN_COMMENTAIRE,
             P.C_IN_MOT_PASSE,
             P.L_IN_TEMPS_ACTIF,
             P.L_IN_TEMPS_CONNEXION,
             P.V_IN_CREE_PAR,
             P.D_IN_DATE_CREATION,
             P.V_IN_MODIFIE_PAR,
             P.D_IN_DATE_MODIFICATION,
             P.V_IN_NAME_PARENT,
             P.L_IN_SECTEUR,
             L_IN_SOUS_SECTEUR,
             P.V_IN_GESTIONNAIRE
        FROM IN_INTERVENANT P
       WHERE P.NAME = NEW_NAME;
  END SP_L_In_Intervenant;
  PROCEDURE SP_L2_In_Intervenant(NEW_NAME IN IN_INTERVENANT.NAME%TYPE,
                                 rc1      IN OUT DTS2_IN_INTERVENANT) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_IN_CLE,
             P.L_SI_CLE,
             P.NAME,
             P.I_LA_CLE,
             P.I_ST_CLE,
             NVL(P.I_CC_CLE, PO.I_CC_CLE) "I_CC_CLE",
             NVL(P.I_NH_CLE, PO.I_NH_CLE) "I_NH_CLE",
             P.V_IN_NO_EMPLOYE,
             P.V_IN_NOM,
             P.V_IN_PRENOM,
             P.V_IN_COMMENTAIRE,
             P.C_IN_MOT_PASSE,
             P.L_IN_TEMPS_ACTIF,
             P.L_IN_TEMPS_CONNEXION,
             P.V_IN_CREE_PAR,
             P.D_IN_DATE_CREATION,
             P.V_IN_MODIFIE_PAR,
             P.D_IN_DATE_MODIFICATION,
             S.I_EN_CLE,
             P.V_IN_NAME_PARENT,
             P.L_IN_SECTEUR,
             L_IN_SOUS_SECTEUR
        FROM IN_INTERVENANT P, SI_SITE S, PO_POSTE PO
       WHERE S.L_SI_CLE = P.L_SI_CLE
         AND UPPER(P.NAME) = UPPER(NEW_NAME);
  END SP_L2_In_Intervenant;
  PROCEDURE SP_L3_In_Intervenant(rc1 IN OUT DTS2_IN_INTERVENANT) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_IN_CLE,
             P.L_SI_CLE,
             P.NAME,
             P.I_LA_CLE,
             P.I_ST_CLE,
             P.I_CC_CLE,
             P.I_NH_CLE,
             P.V_IN_NO_EMPLOYE,
             P.V_IN_NOM,
             P.V_IN_PRENOM,
             P.V_IN_COMMENTAIRE,
             P.C_IN_MOT_PASSE,
             P.L_IN_TEMPS_ACTIF,
             P.L_IN_TEMPS_CONNEXION,
             P.V_IN_CREE_PAR,
             P.D_IN_DATE_CREATION,
             P.V_IN_MODIFIE_PAR,
             P.D_IN_DATE_MODIFICATION,
             S.I_EN_CLE,
             P.V_IN_NAME_PARENT,
             P.L_IN_SECTEUR,
             L_IN_SOUS_SECTEUR
        FROM IN_INTERVENANT P, SI_SITE S
       WHERE S.L_SI_CLE = P.L_SI_CLE;
  END SP_L3_In_Intervenant;
  PROCEDURE SP_L_Sis_Site_Inscription(NEW_L_IS_CLE IN SIS_SITE_INSCRIPTION.L_IS_CLE%TYPE,
                                      NEW_L_SI_CLE IN SIS_SITE_INSCRIPTION.L_SI_CLE%TYPE,
                                      rc1          IN OUT DTS_SIS_SITE_INSCRIPTION) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_IS_CLE, P.L_SI_CLE, P.L_IS_SITE
        FROM SIS_SITE_INSCRIPTION P
       WHERE P.L_SI_CLE = NEW_L_SI_CLE
         AND P.L_IS_CLE = NEW_L_IS_CLE;
  END SP_L_Sis_Site_Inscription;
  PROCEDURE SP_L_Sv_Suivi(NEW_L_SV_REFERENCE IN SV_SUIVI.L_SV_REFERENCE%TYPE,
                          NEW_L_SV_REF_SITE  IN SV_SUIVI.L_SV_REF_SITE%TYPE,
                          NEW_C_SV_REF_GENRE IN SV_SUIVI.C_SV_REF_GENRE%TYPE,
                          rc1                IN OUT DTS_SV_SUIVI) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_SV_CLE,
             P.L_SI_CLE,
             P.L_SV_REFERENCE,
             P.L_SV_REF_SITE,
             P.C_SV_REF_GENRE,
             P.V_SV_SUIVI,
             P.I_TC_CLE,
             P.I_ST_CLE,
             P.D_SV_DATE_PREVUE,
             P.D_SV_DATE_COMPLETEE,
             P.L_SV_PO_ORIGINE,
             P.V_SV_DEMANDEUR,
             P.V_SV_INTERVENANT,
             P.L_SV_PO_ASSIGNE,
             P.V_SV_CREE_PAR,
             P.I_CC_SUIVI,
             P.I_NH_SUIVI,
             P.I_CC_CREATEUR,
             P.I_NH_CREATEUR,
             P.D_SV_DATE_CREATION,
             P.V_SV_MODIFIE_PAR,
             P.D_SV_MODIFICATION,
             P.V_SV_APPROBATEUR,
             P.I_CC_APPROBATEUR,
             P.I_NH_APPROBATEUR,
             P.D_SV_APPROBATION,
             P.V_SV_REFERENCE_1,
             P.V_SV_REFERENCE_2,
             P.V_SV_REFERENCE_3,
             S.I_EN_CLE
        FROM SV_SUIVI P, SI_SITE S
       WHERE P.L_SV_REF_SITE = NEW_L_SV_REF_SITE
         AND P.C_SV_REF_GENRE = NEW_C_SV_REF_GENRE
         AND P.L_SV_REFERENCE = NEW_L_SV_REFERENCE
         AND P.L_SI_CLE = S.L_SI_CLE
         AND (P.V_SV_CREE_PAR = Cardex_SPecial.g_usager OR
             NVL(P.I_CC_SUIVI, Cardex_SPecial.g_code_confidentialite) <=
             Cardex_SPecial.g_code_confidentialite);
  END SP_L_Sv_Suivi;
  PROCEDURE SP_L_Sv_Suivi(NEW_L_SV_CLE IN SV_SUIVI.L_SV_CLE%TYPE,
                          NEW_L_SI_CLE IN SV_SUIVI.L_SI_CLE%TYPE,
                          rc1          IN OUT DTS_SV_SUIVI) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_SV_CLE,
             P.L_SI_CLE,
             P.L_SV_REFERENCE,
             P.L_SV_REF_SITE,
             P.C_SV_REF_GENRE,
             P.V_SV_SUIVI,
             P.I_TC_CLE,
             P.I_ST_CLE,
             P.D_SV_DATE_PREVUE,
             P.D_SV_DATE_COMPLETEE,
             P.L_SV_PO_ORIGINE,
             P.V_SV_DEMANDEUR,
             P.V_SV_INTERVENANT,
             P.L_SV_PO_ASSIGNE,
             P.V_SV_CREE_PAR,
             P.I_CC_SUIVI,
             P.I_NH_SUIVI,
             P.I_CC_CREATEUR,
             P.I_NH_CREATEUR,
             P.D_SV_DATE_CREATION,
             P.V_SV_MODIFIE_PAR,
             P.D_SV_MODIFICATION,
             P.V_SV_APPROBATEUR,
             P.I_CC_APPROBATEUR,
             P.I_NH_APPROBATEUR,
             P.D_SV_APPROBATION,
             P.V_SV_REFERENCE_1,
             P.V_SV_REFERENCE_2,
             P.V_SV_REFERENCE_3,
             S.I_EN_CLE
        FROM SV_SUIVI P, SI_SITE S
       WHERE P.L_SV_CLE = NEW_L_SV_CLE
         AND P.L_SI_CLE = NEW_L_SI_CLE
         AND P.L_SI_CLE = S.L_SI_CLE;
  END SP_L_Sv_Suivi;
  PROCEDURE SP_Rap_Sv_Suivi(NEW_V_SV_DEMANDEUR       IN SV_SUIVI.V_SV_DEMANDEUR%TYPE,
                            NEW_V_SV_INTERVENANT     IN SV_SUIVI.V_SV_INTERVENANT%TYPE,
                            NEW_SECTEUR_ASSIGNE      IN VARCHAR2,
                            NEW_SECTEUR_ORIGINE      IN VARCHAR2,
                            NEW_DATE_CREATION_DEBUT  IN SV_SUIVI.D_SV_DATE_CREATION%TYPE,
                            NEW_DATE_CREATION_FIN    IN SV_SUIVI.D_SV_DATE_CREATION%TYPE,
                            NEW_V_SV_APPROBATEUR     IN SV_SUIVI.V_SV_APPROBATEUR%TYPE,
                            NEW_DATE_PREVUE_DEBUT    IN SV_SUIVI.D_SV_DATE_PREVUE%TYPE,
                            NEW_DATE_PREVUE_FIN      IN SV_SUIVI.D_SV_DATE_PREVUE%TYPE,
                            NEW_DATE_COMPLETEE_DEBUT IN SV_SUIVI.D_SV_DATE_COMPLETEE%TYPE,
                            NEW_DATE_COMPLETEE_FIN   IN SV_SUIVI.D_SV_DATE_COMPLETEE%TYPE,
                            NEW_SITE_INTERVENANT     IN VARCHAR2,
                            rc1                      IN OUT DTS_RAP_SV_SUIVI) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_SV_CLE,
             P.L_SI_CLE,
             P.L_SV_REFERENCE,
             P.L_SV_REF_SITE,
             P.C_SV_REF_GENRE,
             P.V_SV_SUIVI,
             P.I_TC_CLE,
             P.I_ST_CLE,
             P.D_SV_DATE_PREVUE,
             P.D_SV_DATE_COMPLETEE,
             P.L_SV_PO_ORIGINE,
             P.V_SV_DEMANDEUR,
             P.V_SV_INTERVENANT,
             P.L_SV_PO_ASSIGNE,
             P.V_SV_CREE_PAR,
             P.I_CC_SUIVI,
             P.I_NH_SUIVI,
             P.I_CC_CREATEUR,
             P.I_NH_CREATEUR,
             P.D_SV_DATE_CREATION,
             P.V_SV_MODIFIE_PAR,
             P.D_SV_MODIFICATION,
             P.V_SV_APPROBATEUR,
             P.I_CC_APPROBATEUR,
             P.I_NH_APPROBATEUR,
             P.D_SV_APPROBATION,
             P.V_SV_REFERENCE_1,
             P.V_SV_REFERENCE_2,
             P.V_SV_REFERENCE_3,
             D.L_DO_CLE,
             D.L_SI_CLE,
             D.V_DO_MOT_PASSE,
             D.I_NA_CLE,
             D.I_CC_CLE,
             D.I_NH_CLE,
             D.V_DO_CREE_PAR,
             D.V_DO_NUMERO_DOSSIER
        FROM SV_SUIVI P, V_DO_DOSSIER_CA_TY D
       WHERE P.V_SV_DEMANDEUR LIKE NEW_V_SV_DEMANDEUR
         AND P.V_SV_INTERVENANT LIKE NEW_V_SV_INTERVENANT
         AND NVL(P.V_SV_REFERENCE_2, ' ') LIKE NEW_SECTEUR_ASSIGNE
         AND NVL(P.V_SV_REFERENCE_3, ' ') LIKE NEW_SECTEUR_ORIGINE
         AND NVL(P.V_SV_APPROBATEUR, ' ') LIKE NEW_V_SV_APPROBATEUR
         AND P.D_SV_DATE_CREATION >= NEW_DATE_CREATION_DEBUT
         AND TRUNC(P.D_SV_DATE_CREATION) <= TRUNC(NEW_DATE_CREATION_FIN)
         AND NVL(P.D_SV_DATE_PREVUE, TO_DATE('18000101', 'YYYYMMDD')) >=
             NEW_DATE_PREVUE_DEBUT
         AND TRUNC(NVL(P.D_SV_DATE_PREVUE, SYSDATE + 5000)) <=
             TRUNC(NEW_DATE_PREVUE_FIN)
         AND NVL(P.D_SV_DATE_COMPLETEE, TO_DATE('18000101', 'YYYYMMDD')) >=
             NEW_DATE_COMPLETEE_DEBUT
         AND TRUNC(NVL(P.D_SV_DATE_COMPLETEE, SYSDATE)) <=
             TRUNC(NEW_DATE_COMPLETEE_FIN)
         AND (P.V_SV_CREE_PAR = Cardex_SPecial.g_usager OR
             NVL(P.I_CC_SUIVI, Cardex_SPecial.g_code_confidentialite) <=
             Cardex_SPecial.g_code_confidentialite)
         AND P.L_SV_REFERENCE = D.L_DO_CLE
         AND P.L_SI_CLE = D.L_SI_CLE
         AND TO_CHAR(D.L_SI_CLE) LIKE NEW_SITE_INTERVENANT;
  END SP_Rap_Sv_Suivi;
  PROCEDURE SP_L_CN_CONSIGNATION(NEW_L_CN_REF_CLE   IN CN_CONSIGNATION.L_CN_REF_CLE%TYPE,
                                 NEW_L_CN_REF_SITE  IN CN_CONSIGNATION.L_CN_REF_SITE%TYPE,
                                 NEW_C_CN_REF_GENRE IN CN_CONSIGNATION.C_CN_REF_GENRE%TYPE,
                                 rc1                IN OUT DTS_CN_CONSIGNATION) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_CN_CLE,
             P.L_SI_CLE,
             P.L_CN_REF_CLE,
             P.L_CN_REF_SITE,
             P.C_CN_REF_GENRE,
             P.I_DE_CLE,
             P.I_TN_CLE,
             P.L_CN_QUANTITE,
             P.R_CN_PRIX,
             P.R_CN_MONTANT,
             P.V_CN_POIDS,
             P.V_CN_DIMENSION,
             P.V_CN_MARQUE,
             P.V_CN_MODELE,
             P.V_CN_FOURNISSEUR,
             P.V_CN_DESCRIPTION,
             P.V_CN_COMMENTAIRE,
             P.V_CN_NUMERO_SERIE,
             P.V_CN_CREE_PAR,
             P.D_CN_DATE_CREATION,
             P.V_CN_MODIFIE_PAR,
             P.D_CN_DATE_MODIFICATION,
             P.V_CN_APPROUVE_PAR,
             P.D_CN_DATE_APPROBATION,
             P.C_CN_APPROUVABLE,
             P.C_CN_APPROUVE,
             P.V_CN_REFERENCE1,
             P.V_CN_REFERENCE2,
             P.i_Dn_Cle
        FROM CN_CONSIGNATION P
       WHERE P.L_CN_REF_SITE = NEW_L_CN_REF_SITE
         AND P.C_CN_REF_GENRE = NEW_C_CN_REF_GENRE
         AND P.L_CN_REF_CLE = NEW_L_CN_REF_CLE;
  END SP_L_CN_CONSIGNATION;
  PROCEDURE SP_L_CN_CONSIGNATION(NEW_L_CN_CLE IN CN_CONSIGNATION.L_CN_CLE%TYPE,
                                 NEW_L_SI_CLE IN CN_CONSIGNATION.L_SI_CLE%TYPE,
                                 rc1          IN OUT DTS_CN_CONSIGNATION) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_CN_CLE,
             P.L_SI_CLE,
             P.L_CN_REF_CLE,
             P.L_CN_REF_SITE,
             P.C_CN_REF_GENRE,
             P.I_DE_CLE,
             P.I_TN_CLE,
             P.L_CN_QUANTITE,
             P.R_CN_PRIX,
             P.R_CN_MONTANT,
             P.V_CN_POIDS,
             P.V_CN_DIMENSION,
             P.V_CN_MARQUE,
             P.V_CN_MODELE,
             P.V_CN_FOURNISSEUR,
             P.V_CN_DESCRIPTION,
             P.V_CN_COMMENTAIRE,
             P.V_CN_NUMERO_SERIE,
             P.V_CN_CREE_PAR,
             P.D_CN_DATE_CREATION,
             P.V_CN_MODIFIE_PAR,
             P.D_CN_DATE_MODIFICATION,
             P.V_CN_APPROUVE_PAR,
             P.D_CN_DATE_APPROBATION,
             P.C_CN_APPROUVABLE,
             P.C_CN_APPROUVE,
             P.V_CN_REFERENCE1,
             P.V_CN_REFERENCE2,
             P.i_Dn_Cle
        FROM CN_CONSIGNATION P
       WHERE P.L_CN_CLE = NEW_L_CN_CLE
         AND P.L_SI_CLE = NEW_L_SI_CLE;
  END SP_L_CN_CONSIGNATION;
  --Lecture d'un mandat spécifique
  PROCEDURE SP_L_PSU_MANDAT(NEW_L_PSU_CLE IN PSU_MANDAT.L_PSU_CLE%TYPE,
                            NEW_L_SI_CLE  IN PSU_MANDAT.L_SI_CLE%TYPE,
                            rc1           IN OUT DTS_PSU_MANDAT) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_PSU_CLE,
             P.L_SI_CLE,
             P.V_PSU_NUMERO_MANDAT,
             P.I_TA_CLE,
             P.V_PSU_DESCRIPTION,
             P.V_PSU_DESTINATAIRE_A,
             P.V_PSU_DESTINATAIRE_CC,
             P.V_PSU_DESTINATAIRE_CCI,
             P.I_ST_CLE,
             P.V_PSU_MESSAGE,
             P.D_PSU_DATE_DEBUT,
             P.D_PSU_DATE_FIN,
             P.C_PSU_GENRE_FICHIER,
             P.L_PSU_REFERENCE_CLE,
             P.L_PSU_REFERENCE_SITE,
             P.I_PSU_EN_CLE,
             P.L_PSU_SI_CLE,
             P.I_PSU_GE_CLE,
             P.I_PSU_NA_CLE,
             P.I_PSU_TY_CLE,
             P.I_PSU_CA_CLE,
             P.I_PSU_FO_CLE,
             P.V_PSU_NAME,
             P.V_PSU_DO_ANCIENNE_REFERENCE,
             P.V_PSU_DO_NUMERO_DOSSIER,
             p.v_Psu_Do_Reference_1,
             P.V_PSU_SU_REFERENCE_3,
             P.V_PSU_SU_NOM,
             P.V_PSU_SU_PRENOM,
             P.V_PSU_SO_REFERENCE_3,
             P.V_PSU_SO_NOM,
             P.V_PSU_VE_IMMATRICULATION,
             P.V_PSU_VE_PROVINCE,
             P.V_PSU_MOT_CLE1,
             P.V_PSU_MOT_CLE2,
             P.V_PSU_MOT_CLE3,
             P.V_PSU_CREE_PAR,
             P.D_PSU_DATE_CREATION,
             P.V_PSU_MODIFIE_PAR,
             P.D_PSU_DATE_MODIFICATION,
             P.V_PSU_APPROUVE_PAR,
             P.D_PSU_DATE_APPROBATION
        FROM PSU_MANDAT P
       WHERE P.L_PSU_CLE = NEW_L_PSU_CLE
         AND P.L_SI_CLE = NEW_L_SI_CLE;
  END SP_L_PSU_MANDAT;

  --Onglet Partage
  PROCEDURE SP_L_LPD_PARTAGE_DOSSIER(NEW_L_LPD_REFERENCE IN LPD_PARTAGE_DOSSIER.L_LPD_REFERENCE%TYPE,
                                     NEW_L_LPD_REF_SITE  IN LPD_PARTAGE_DOSSIER.L_LPD_REF_SITE%TYPE,
                                     rc1                 IN OUT DTS_LPD_PARTAGE_DOSSIER) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_LPD_CLE,
             P.L_SI_CLE,
             P.L_LPD_REFERENCE,
             P.V_LPD_NAME,
             P.V_LPD_CREE_PAR,
             P.D_LPD_DATE_CREATION,
             P.L_LPD_REF_SITE,
             P.C_LPD_GENRE,
             I.L_SI_CLE AS "SITE",
             T.V_TR_DESCRIPTION
        FROM LPD_PARTAGE_DOSSIER P, IN_INTERVENANT I, TR_TRADUCTION T
       WHERE P.L_LPD_REF_SITE = NEW_L_LPD_REF_SITE
         AND P.L_LPD_REFERENCE = NEW_L_LPD_REFERENCE
         AND P.V_LPD_NAME = I.NAME
         AND I.L_IN_SECTEUR = T.L_TR_CLE
         AND T.I_LA_CLE = Cardex_SPecial.g_langue;
  END SP_L_LPD_PARTAGE_DOSSIER;

  PROCEDURE SP_L_LPD_PARTAGE_DOSSIER2(NEW_L_LPD_REFERENCE IN LPD_PARTAGE_DOSSIER.L_LPD_REFERENCE%TYPE,
                                     NEW_L_LPD_REF_SITE  IN LPD_PARTAGE_DOSSIER.L_LPD_REF_SITE%TYPE,
                                     rc1                 IN OUT DTS_LPD_PARTAGE_DOSSIER) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_LPD_CLE,
             P.L_SI_CLE,
             P.L_LPD_REFERENCE,
             P.V_LPD_NAME,
             P.V_LPD_CREE_PAR,
             P.D_LPD_DATE_CREATION,
             P.L_LPD_REF_SITE,
             P.C_LPD_GENRE,
             I.L_SI_CLE AS "SITE",
             T.V_TR_DESCRIPTION
        FROM LPD_PARTAGE_DOSSIER P, IN_INTERVENANT I, TR_TRADUCTION T
       WHERE P.L_LPD_REF_SITE = NEW_L_LPD_REF_SITE
         AND P.L_LPD_REFERENCE = NEW_L_LPD_REFERENCE
         --AND P.C_LPD_GENRE = 'RES'
         AND P.V_LPD_NAME = I.NAME
         AND I.L_IN_SECTEUR = T.L_TR_CLE
         AND T.I_LA_CLE = Cardex_SPecial.g_langue;
  END SP_L_LPD_PARTAGE_DOSSIER2;

  PROCEDURE SP_L_Su_Sujet_Ad_Adresse(NEW_L_SI_CLE            IN SU_SUJET.L_SI_CLE%TYPE,
                                     NEW_DATE_CREATION_DEBUT IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                     NEW_DATE_CREATION_FIN   IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                     rc1                     IN OUT DTS_SU_SUJET_AD_ADRESSE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT SU.L_SU_CLE,
             SU.L_SI_CLE,
             SU.I_SX_CLE,
             SU.I_ST_CLE,
             SU.I_NT_CLE,
             SU.I_RA_CLE,
             SU.I_LS_CLE,
             SU.V_SU_NOM,
             SU.V_SU_PRENOM,
             SU.V_SU_SURNOM,
             SU.D_SU_DATE_NAISSANCE,
             SU.L_SU_TYPE_AGE,
             SU.C_SU_ASSURANCE_SOCIALE,
             SU.V_SU_PERMIS_CONDUIRE,
             SU.V_SU_GRANDEUR_METRIQUE,
             SU.V_SU_GRANDEUR_IMPERIAL,
             SU.V_SU_POIDS_METRIQUE,
             SU.V_SU_POIDS_IMPERIAL,
             SU.C_SU_SYSTEME,
             SU.I_CC_CLE,
             SU.V_SU_MOT_PASSE,
             SU.V_SU_REFERENCE_1,
             SU.V_SU_REFERENCE_2,
             SU.V_SU_REFERENCE_3,
             SU.V_SU_CREE_PAR,
             SU.D_SU_DATE_CREATION,
             SU.C_SU_SNDX_NOM,
             SU.C_SU_SNDX_PRENOM,
             SU.C_SU_SNDX_SURNOM,
             SU.I_SE_CLE,
             SU.I_SE_CLE_AUTRES,
             SU.I_SE_CLE_CASINO,
             SU.V_SU_NO_PASSEPORT,
             S.I_EN_CLE,
             SU.V_SU_ASSURANCE_MALADIE,
             AD.L_AD_CLE,
             AD.L_SI_CLE,
             AD.L_AD_REFERENCE,
             AD.V_AD_ADRESSE,
             AD.V_AD_ADRESSE2,
             AD.V_AD_NUM_MUNICIPAL,
             AD.L_AD_TYPE_RUE,
             AD.V_AD_NOM_RUE,
             AD.L_AD_POINT_CARDINAL,
             AD.L_AD_TYPE_UNITE,
             AD.V_AD_NO_UNITE,
             AD.V_AD_ADRESSE_POST,
             AD.V_AD_ELECTRONIQUE_1,
             AD.V_AD_ELECTRONIQUE_2,
             AD.L_VI_CLE,
             AD.V_AD_CODE_POSTAL,
             AD.I_TE_CLE_1,
             AD.V_AD_TELEPHONE_1,
             AD.I_TE_CLE_2,
             AD.V_AD_TELEPHONE_2,
             AD.I_TE_CLE_3,
             AD.V_AD_TELEPHONE_3,
             AD.I_ST_CLE,
             AD.V_AD_COMMENTAIRE,
             AD.V_AD_CREE_PAR,
             AD.D_AD_DATE_CREATION,
             AD.V_AD_MODIFIE_PAR,
             AD.D_AD_DATE_MODIFICATION,
             AD.L_AD_REF_SITE,
             AD.C_AD_REF_GENRE,
             AD.I_PA_CLE,
             AD.L_PR_CLE
        FROM SU_SUJET SU, AD_ADRESSE AD, SI_SITE S
       WHERE SU.L_SU_CLE = AD.L_AD_REFERENCE
         AND SU.L_SI_CLE = AD.L_AD_REF_SITE
         AND SU.L_SI_CLE = NEW_L_SI_CLE
         AND SU.L_SI_CLE = S.L_SI_CLE
         AND (SU.V_SU_CREE_PAR = Cardex_SPecial.g_usager OR
             NVL(SU.I_CC_CLE, Cardex_SPecial.g_code_confidentialite) <=
             Cardex_SPecial.g_code_confidentialite)
            --AND SU.V_SU_MOT_PASSE IS NULL
         AND (NEW_DATE_CREATION_DEBUT is null OR
             AD.D_AD_DATE_CREATION >= NEW_DATE_CREATION_DEBUT)
         AND (NEW_DATE_CREATION_FIN is null OR
             AD.D_AD_DATE_CREATION <= NEW_DATE_CREATION_FIN)
       ORDER BY SU.V_SU_NOM, SU.V_SU_PRENOM, AD.D_AD_DATE_CREATION DESC;
  END SP_L_Su_Sujet_Ad_Adresse;

  PROCEDURE SP_L_So_Societe_Ad_Adresse(NEW_L_SI_CLE            IN SO_SOCIETE.L_SI_CLE%TYPE,
                                       NEW_DATE_CREATION_DEBUT IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                       NEW_DATE_CREATION_FIN   IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                                       rc1                     IN OUT DTS_SO_SOCIETE_AD_ADRESSE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT SO.L_SO_CLE,
             SO.L_SI_CLE,
             SO.I_ST_CLE,
             SO.I_LS_CLE,
             SO.V_SO_RAISON_SOCIALE,
             SO.V_SO_NOM,
             SO.I_CL_CLE,
             SO.D_SO_DATE_FONDATION,
             SO.I_CC_CLE,
             SO.V_SO_MOT_PASSE,
             SO.V_SO_REFERENCE_NOM,
             SO.V_SO_REFERENCE_PRENOM,
             SO.V_SO_REFERENCE_1,
             SO.V_SO_REFERENCE_2,
             SO.V_SO_REFERENCE_3,
             SO.V_SO_CREE_PAR,
             SO.D_SO_DATE_CREATION,
             SO.C_SO_SNDX_RAISON_SOCIALE,
             SO.C_SO_SNDX_NOM,
             SO.I_SE_CLE,
             SO.I_SE_CLE_CASINO,
             AD.L_AD_CLE,
             AD.L_SI_CLE,
             AD.L_AD_REFERENCE,
             AD.V_AD_ADRESSE,
             AD.V_AD_ADRESSE2,
             AD.V_AD_NUM_MUNICIPAL,
             AD.L_AD_TYPE_RUE,
             AD.V_AD_NOM_RUE,
             AD.L_AD_POINT_CARDINAL,
             AD.L_AD_TYPE_UNITE,
             AD.V_AD_NO_UNITE,
             AD.V_AD_ADRESSE_POST,
             AD.V_AD_ELECTRONIQUE_1,
             AD.V_AD_ELECTRONIQUE_2,
             AD.L_VI_CLE,
             AD.V_AD_CODE_POSTAL,
             AD.I_TE_CLE_1,
             AD.V_AD_TELEPHONE_1,
             AD.I_TE_CLE_2,
             AD.V_AD_TELEPHONE_2,
             AD.I_TE_CLE_3,
             AD.V_AD_TELEPHONE_3,
             AD.I_ST_CLE,
             AD.V_AD_COMMENTAIRE,
             AD.V_AD_CREE_PAR,
             AD.D_AD_DATE_CREATION,
             AD.V_AD_MODIFIE_PAR,
             AD.D_AD_DATE_MODIFICATION,
             AD.L_AD_REF_SITE,
             AD.C_AD_REF_GENRE,
             AD.I_PA_CLE,
             AD.L_PR_CLE
        FROM SO_SOCIETE SO, AD_ADRESSE AD
       WHERE SO.L_SO_CLE = AD.L_AD_REFERENCE
         AND SO.L_SI_CLE = AD.L_AD_REF_SITE
         AND SO.L_SI_CLE = NEW_L_SI_CLE
         AND (SO.V_SO_CREE_PAR = Cardex_SPecial.g_usager OR
             NVL(SO.I_CC_CLE, Cardex_SPecial.g_code_confidentialite) <=
             Cardex_SPecial.g_code_confidentialite)
         AND (NEW_DATE_CREATION_DEBUT is null OR
             AD.D_AD_DATE_CREATION >= NEW_DATE_CREATION_DEBUT)
         AND (NEW_DATE_CREATION_FIN is null OR
             AD.D_AD_DATE_CREATION <= NEW_DATE_CREATION_FIN)
       ORDER BY SO.V_SO_NOM, AD.D_AD_DATE_CREATION DESC;
  END SP_L_So_Societe_Ad_Adresse;

  PROCEDURE SP_L_LIRE_FICHIER(NEW_L_EM_CLE IN MM_MULTIMEDIA.L_EM_CLE%TYPE,
                              NEW_L_SI_CLE IN MM_MULTIMEDIA.L_SI_CLE%TYPE,
                              rc1          OUT DTS_FICHIER) IS
  BEGIN
    OPEN rc1 FOR
      SELECT mm.v_mm_extension,
             mm.i_tm_cle,
             lmm.l_lmm_reference,
             lmm.l_lmm_ref_site,
             lmm.c_lmm_ref_genre
        from mm_multimedia mm, lmm_lien_multimedia lmm
       where mm.l_em_cle = NEW_L_EM_CLE
         AND mm.l_em_si_cle = NEW_L_SI_CLE
         and mm.l_mm_cle = lmm.l_mm_cle
         and mm.l_si_cle = lmm.l_mm_ref_site;
  END SP_L_LIRE_FICHIER;

  PROCEDURE SP_L_LIEN_BILLET_PRESENTE(NEW_L_DO_CLE IN DO_DOSSIER.L_DO_CLE%TYPE,
                                      NEW_L_SI_CLE IN DO_DOSSIER.L_SI_CLE%TYPE,
                                      rc1          OUT DTS_LIEN_BILLET) IS
  BEGIN
    OPEN rc1 FOR
      select ldd.l_ldd_cle,
             ldd.l_si_cle,
             ldd.i_ro_cle,
             ldd.l_ldd_dossier_associe,
             ldd.l_ldd_site
        from ldd_lien_dossier ldd
       where ldd.l_do_cle = NEW_L_DO_CLE
         and ldd.l_do_site = NEW_L_SI_CLE
         and ldd.c_do_genre = 'DO'
         and ldd.c_ldd_genre = 'SO'
         and ldd.i_ro_cle in (25995, 25996, 26176);
  END SP_L_LIEN_BILLET_PRESENTE;

  PROCEDURE SP_L_LIEN_BILLET_REQUIS(NEW_L_DO_CLE IN DO_DOSSIER.L_DO_CLE%TYPE,
                                    NEW_L_SI_CLE IN DO_DOSSIER.L_SI_CLE%TYPE,
                                    rc1          OUT DTS_LIEN_BILLET) IS
  BEGIN
    OPEN rc1 FOR
    -- 25995 : Détaillant vendeur
    -- 25996 : Détaillant de validation
    -- 26176 : Détaillant enquêté
      select 0, 0, 25995, bi.l_so_cle_provenance, bi.l_so_site_provenance
        from bi_billet bi
       where bi.l_bi_ref_cle = NEW_L_DO_CLE
         and bi.l_bi_ref_site = NEW_L_SI_CLE
         and bi.l_so_cle_provenance is not null
      union
      select 0, 0, 25996, bi.l_so_cle_validation, bi.l_so_site_validation
        from bi_billet bi
       where bi.l_bi_ref_cle = NEW_L_DO_CLE
         and bi.l_bi_ref_site = NEW_L_SI_CLE
         and bi.l_so_cle_validation is not null
      union
      select 0, 0, 26176, bi.l_so_cle_fautif, bi.l_so_site_fautif
        from bi_billet bi
       where bi.l_bi_ref_cle = NEW_L_DO_CLE
         and bi.l_bi_ref_site = NEW_L_SI_CLE
         and bi.l_so_cle_fautif is not null;
  END SP_L_LIEN_BILLET_REQUIS;

  PROCEDURE SP_L_AIDE_CHAMP(NEW_V_AI_CHAMP IN AI_AIDE.V_AI_CHAMP%TYPE,
                            NEW_I_LA_CLE   IN AI_AIDE.I_LA_CLE%TYPE,
                            rc1            OUT DTS_AI_AIDE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT *
        from AI_AIDE T
       where T.V_AI_CHAMP = NEW_V_AI_CHAMP
         and T.I_LA_CLE = NEW_I_LA_CLE;
  END SP_L_AIDE_CHAMP;

  PROCEDURE SP_L_AIDE_VALEUR(NEW_L_AI_VALEUR IN AI_AIDE.L_AI_VALEUR%TYPE,
                             NEW_I_LA_CLE    IN AI_AIDE.I_LA_CLE%TYPE,
                             rc1             OUT DTS_AI_AIDE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT *
        from AI_AIDE T
       where T.L_AI_VALEUR = NEW_L_AI_VALEUR
         and T.I_LA_CLE = NEW_I_LA_CLE;
  END SP_L_AIDE_VALEUR;

  PROCEDURE SP_L_CN_CONSIGNATION_APP(NEW_I_TN_CLE          IN CN_CONSIGNATION.I_TN_CLE%TYPE,
                                     NEW_V_CN_NUMERO_SERIE IN CN_CONSIGNATION.V_CN_NUMERO_SERIE%TYPE,
                                     rc1                   OUT DTS_CONSIGNATION_APPROBATION) IS
  BEGIN
    OPEN rc1 FOR
      SELECT t.v_cn_approuve_par,
             max(t.d_cn_date_approbation) AS DATE_APPROBATION,
             t.c_cn_approuve
        from CN_CONSIGNATION T
       where t.i_tn_cle = NEW_I_TN_CLE
         and t.v_cn_numero_serie = NEW_V_CN_NUMERO_SERIE
       group by t.v_cn_approuve_par, t.c_cn_approuve;
  END SP_L_CN_CONSIGNATION_APP;

  PROCEDURE SP_L_VE_VEHICULE_EXISTANT(NEW_V_VE_IMMATRICULATION IN VE_VEHICULE.V_VE_IMMATRICULATION%TYPE,
                                      NEW_I_MD_CLE             IN VE_VEHICULE.I_MD_CLE%TYPE,
                                      rc1                      OUT DTS_VE_VEHICULE_EXISTANT) IS
  BEGIN
    OPEN rc1 FOR
      SELECT VE.V_VE_IMMATRICULATION, M.V_MD_MODELE, VE.D_VE_DATE_CREATION
        from VE_VEHICULE VE, MD_MODELE M
       where VE.I_MD_CLE = M.I_MD_CLE
         and replace(replace(ve.v_ve_immatriculation, ' ', ''), '-', '') =
             NEW_V_VE_IMMATRICULATION
         and ve.i_md_cle = NEW_I_MD_CLE;
  END SP_L_VE_VEHICULE_EXISTANT;

  PROCEDURE SP_L_SU_SUJET_EXISTANT(NEW_V_SU_PRENOM         IN SU_SUJET.V_SU_PRENOM%TYPE,
                                   NEW_V_SU_NOM            IN SU_SUJET.V_SU_NOM%TYPE,
                                   NEW_D_SU_DATE_NAISSANCE IN SU_SUJET.D_SU_DATE_NAISSANCE%TYPE,
                                   rc1                     OUT DTS_SU_SUJET) IS
  BEGIN
    OPEN rc1 FOR
      SELECT *
        from SU_SUJET SU
       where trim(convert(upper(SU.V_SU_PRENOM), 'US7ASCII')) LIKE
             trim(convert('%' || NEW_V_SU_PRENOM || '%', 'US7ASCII'))
         and trim(convert(upper(SU.V_SU_NOM), 'US7ASCII')) LIKE
             trim(convert('%' || NEW_V_SU_NOM || '%', 'US7ASCII'))
         and D_SU_DATE_NAISSANCE = NEW_D_SU_DATE_NAISSANCE;
  END SP_L_SU_SUJET_EXISTANT;

  PROCEDURE SP_L_EV_EVALUATION(NEW_L_EV_REFERENCE IN EV_EVALUATION.L_EV_REF_CLE%TYPE,
                               NEW_L_EV_REF_SITE  IN EV_EVALUATION.L_EV_REF_SITE%TYPE,
                               rc1                IN OUT DTS_EV_EVALUATION) IS
  BEGIN
    OPEN rc1 FOR
      SELECT L_EV_CLE,
             L_SI_CLE,
             L_EV_REF_CLE,
             L_EV_REF_SITE,
             D_DATE_DEBUT_EVAL,
             D_DATE_FIN_EVAL,
             L_EV_NO_CLIENT_BIJOU,
             V_EV_FAITS_CONNUS,
             V_EV_PROXIMITE,
             V_EV_GRADATION,
             V_EV_TRANSACTION,
             V_EV_COMMENTAIRE_ETAT,
             V_EV_COMMENTAIRE_PROPOS,
             V_EV_COMMENTAIRE_AUTRE,
             V_EV_COMMENTAIRE_SIGNE,
             V_EV_SIGNATAIRE1,
             V_EV_SIGNATAIRE2,
             V_EV_SIGNATAIRE3,
             V_EV_SIGNATAIRE4,
             V_EV_SIGNATAIRE5,
             D_EV_DATE_EVALUATION,
             V_EV_CREE_PAR,
             D_EV_DATE_CREATION,
             V_EV_MODIFIE_PAR,
             D_EV_DATE_MODIFICATION
        FROM EV_EVALUATION E
       WHERE E.L_EV_REF_CLE = NEW_L_EV_REFERENCE
         AND E.L_EV_REF_SITE = NEW_L_EV_REF_SITE
       ORDER BY E.D_EV_DATE_EVALUATION DESC;
  END SP_L_EV_EVALUATION;

  PROCEDURE SP_L2_EV_EVALUATION(NEW_L_EV_CLE IN EV_EVALUATION.L_EV_CLE%TYPE,
                                NEW_L_SI_CLE IN EV_EVALUATION.L_SI_CLE%TYPE,
                                rc1          IN OUT DTS_EV_EVALUATION) IS
  BEGIN
    OPEN rc1 FOR
      SELECT L_EV_CLE,
             L_SI_CLE,
             L_EV_REF_CLE,
             L_EV_REF_SITE,
             D_DATE_DEBUT_EVAL,
             D_DATE_FIN_EVAL,
             L_EV_NO_CLIENT_BIJOU,
             V_EV_FAITS_CONNUS,
             V_EV_PROXIMITE,
             V_EV_GRADATION,
             V_EV_TRANSACTION,
             V_EV_COMMENTAIRE_ETAT,
             V_EV_COMMENTAIRE_PROPOS,
             V_EV_COMMENTAIRE_AUTRE,
             V_EV_COMMENTAIRE_SIGNE,
             V_EV_SIGNATAIRE1,
             V_EV_SIGNATAIRE2,
             V_EV_SIGNATAIRE3,
             V_EV_SIGNATAIRE4,
             V_EV_SIGNATAIRE5,
             D_EV_DATE_EVALUATION,
             V_EV_CREE_PAR,
             D_EV_DATE_CREATION,
             V_EV_MODIFIE_PAR,
             D_EV_DATE_MODIFICATION
        FROM EV_EVALUATION E
       WHERE E.L_EV_CLE = NEW_L_EV_CLE
         AND E.L_SI_CLE = NEW_L_SI_CLE;
  END SP_L2_EV_EVALUATION;

  PROCEDURE SP_L_LME_LIEN_MISE_EVAL(NEW_L_EV_CLE IN LME_LIEN_MISE_EVAL.L_EV_CLE%TYPE,
                               NEW_L_EV_SI_CLE  IN LME_LIEN_MISE_EVAL.L_EV_SI_CLE%TYPE,
                               rc1                IN OUT DTS_LME_LIEN_MISE_EVAL) IS
  BEGIN
    OPEN rc1 FOR
      SELECT L_LME_CLE,
        L_SI_CLE,
        L_EV_CLE,
        L_EV_SI_CLE,
        L_LME_TYPE_JEU,
        V_LME_COMMENTAIRE_JEU,
        L_LME_MISE_MINIMUM,
        L_LME_MISE_MAXIMUM,
        L_LME_MISE_MOYENNE,
        L_LME_GAIN_PERTE,
        L_LME_MISE_TOTAL,
        L_LME_TEMPS_JEU_MIN,
        L_LME_TEMPS_JEU_MAX,
        L_LME_TEMPS_JEU_TOTAL,
        V_LME_CREE_PAR,
        D_LME_DATE_CREATION
        FROM LME_LIEN_MISE_EVAL M
       WHERE M.L_EV_CLE = NEW_L_EV_CLE
         AND M.L_SI_CLE = NEW_L_EV_SI_CLE;
  END SP_L_LME_LIEN_MISE_EVAL;

  --Recherche des adresses de détaillants qui ne sont pas dans Cardex
  PROCEDURE SP_L_ADRESSE_RDD(rc1 IN OUT DTS_ADRESSE_RDD) IS
  BEGIN
    OPEN rc1 FOR
      SELECT S.L_SO_CLE,
             S.L_SI_CLE,
             v.NO_CIVIQUE,
             decode(v.TYPE_RUE_DESC_LONGUE,
                    'rue',
                    24400,
                    'boulevard',
                    24393,
                    'route',
                    24402,
                    'avenue',
                    24392,
                    'allée',
                    24390,
                    'place',
                    24399,
                    24400) as "TYPE_RUE_DESC_LONGUE",
             v.NOM_RUE,
             decode(upper(v.POINT_CARDINAL_DESC_LONGUE),
                    'EST',
                    23916,
                    'OUEST',
                    23911,
                    'NORD',
                    23907,
                    'SUD',
                    23917,
                    '') as "POINT_CARDINAL_DESC_LONGUE",
             v.NO_UNITE,
             vi.l_vi_cle,
             v.CODE_POSTAL,
             trim(v.TEL_CODE_REGIONAL || ' ' || v.TEL_NO || ' ' ||
                  v.TEL_NO_POSTE) as "AFFAIRE",
             trim(v.FAX_CODE_REGIONAL || ' ' || v.FAX_NO) as "FAX",
             trim(v.TEL_SANS_FRAIS_CODE_REGIONAL || ' ' ||
                  v.TEL_SANS_FRAIS_NO || ' ' || v.TEL_SANS_FRAIS_NO_POSTE) as "SANS_FRAIS",
             v.EMAIL
        FROM VEXI_CDX_DDS_DETAILLANT V, VI_VILLE VI, SO_SOCIETE S
       WHERE S.V_SO_REFERENCE_3 = V.NO_DETAILLANT
         and S.L_SI_CLE = 8
         and (convert(upper('%' || trim(v.VILLE) || '%'), 'US7ASCII') =
             convert(upper('%' || vi.v_vi_ville || '%'), 'US7ASCII') or
             replace(trim(v.VILLE),'St-','Saint-') = vi.v_vi_ville or
             replace(trim(v.VILLE),'Ste-','Sainte-') = vi.v_vi_ville or
             vi.v_vi_ville = substr(v.VILLE,1,instr(v.VILLE,',')-1) or
             vi.v_vi_ville = substr(replace(trim(v.VILLE),'St-','Saint-'),1,instr(replace(trim(v.VILLE),'St-','Saint-'),',')-1) or
             vi.v_vi_ville = substr(replace(trim(v.VILLE),'Ste-','Sainte-'),1,instr(replace(trim(v.VILLE),'Ste-','Sainte-'),',')-1))
         and vi.l_pr_cle(+) = 1101
            --On s'assure qu'une adresse identique n'existe pas déjà.
            --On ajoute l'adresse si le numéro municipal, le nom de la rue, le code postal ou le numéro d'unité diffèrent.
         and not exists
       (select a2.l_ad_reference
                from ad_adresse a2
               where a2.l_ad_reference = s.l_so_cle
                 and a2.l_ad_ref_site = s.l_si_cle
                 and a2.c_ad_ref_genre = 'SO'
                 and a2.b_ad_ind_rdd = 'yes'
                 and (nvl(a2.v_ad_num_municipal, ' ') =
                     nvl(v.NO_CIVIQUE, ' ') and
                     nvl(a2.v_ad_nom_rue, ' ') = nvl(v.NOM_RUE, ' ') and
                     nvl(replace(a2.v_ad_code_postal, '-', ''), ' ') =
                     nvl(v.CODE_POSTAL, ' ') and
                     nvl(a2.v_ad_no_unite, ' ') = nvl(v.NO_UNITE, ' ')));
  END SP_L_ADRESSE_RDD;

  PROCEDURE SP_L_UR_URGENCE(NEW_L_UR_CLE IN UR_URGENCE.L_UR_CLE%TYPE,
                            NEW_L_SI_CLE IN SI_SITE.L_SI_CLE%TYPE,
                            rc1          IN OUT DTS_UR_URGENCE2) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_UR_CLE,
             P.L_SI_CLE,
             P.I_CL_CLE,
             P.L_SO_REF_CLE,
             P.L_SO_REF_SITE,
             P.V_UR_UNITE,
             P.V_UR_DISTRICT,
             P.V_UR_CONTACT,
             P.V_UR_CONTACT_PRENOM,
             P.V_UR_FONCTION,
             P.V_UR_MATRICULE,
             P.V_UR_TELEPHONE,
             P.L_UR_POSTE,
             P.V_UR_TELECOPIEUR,
             P.V_UR_VILLE,
             P.V_UR_COURRIEL,
             P.V_UR_EVENEMENT,
             P.V_UR_REPONDANT,
             P.L_UR_MOTIF,
             P.I_ST_CLE,
             P.D_UR_DATE_CREATION,
             P.V_UR_CREE_PAR,
             P.L_UR_REF_CLE,
             P.L_UR_REF_SITE,
             S.V_SO_NOM
        FROM UR_URGENCE P, SO_SOCIETE S
       WHERE P.L_UR_CLE = NEW_L_UR_CLE
         AND P.L_SI_CLE = NEW_L_SI_CLE
         AND P.L_SO_REF_CLE = S.L_SO_CLE(+)
         AND P.L_SO_REF_SITE = S.L_SI_CLE(+);
  END SP_L_UR_URGENCE;

  PROCEDURE SP_L2_UR_URGENCE(NEW_L_SO_REF_CLE  IN UR_URGENCE.L_SO_REF_CLE%TYPE,
                             NEW_L_SO_REF_SITE IN UR_URGENCE.L_SO_REF_SITE%TYPE,
                             rc1               IN OUT DTS_UR_URGENCE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.*
        FROM UR_URGENCE P
       WHERE P.L_SO_REF_SITE = NEW_L_SO_REF_SITE
         AND P.L_SO_REF_CLE = NEW_L_SO_REF_CLE;
  END SP_L2_UR_URGENCE;

  PROCEDURE SP_L3_UR_URGENCE(NEW_L_UR_REF_CLE  IN UR_URGENCE.L_UR_REF_CLE%TYPE,
                             NEW_L_UR_REF_SITE IN UR_URGENCE.L_UR_REF_SITE%TYPE,
                             rc1               IN OUT DTS_UR_URGENCE2) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_UR_CLE,
             P.L_SI_CLE,
             P.I_CL_CLE,
             P.L_SO_REF_CLE,
             P.L_SO_REF_SITE,
             P.V_UR_UNITE,
             P.V_UR_DISTRICT,
             P.V_UR_CONTACT,
             P.V_UR_CONTACT_PRENOM,
             P.V_UR_FONCTION,
             P.V_UR_MATRICULE,
             P.V_UR_TELEPHONE,
             P.L_UR_POSTE,
             P.V_UR_TELECOPIEUR,
             P.V_UR_VILLE,
             P.V_UR_COURRIEL,
             P.V_UR_EVENEMENT,
             P.V_UR_REPONDANT,
             P.L_UR_MOTIF,
             P.I_ST_CLE,
             P.D_UR_DATE_CREATION,
             P.V_UR_CREE_PAR,
             P.L_UR_REF_CLE,
             P.L_UR_REF_SITE,
             S.V_SO_NOM
        FROM UR_URGENCE P, SO_SOCIETE S
       WHERE P.L_UR_REF_SITE = NEW_L_UR_REF_SITE
         AND P.L_UR_REF_CLE = NEW_L_UR_REF_CLE
         AND P.L_SO_REF_CLE = S.L_SO_CLE(+)
         AND P.L_SO_REF_SITE = S.L_SI_CLE(+);
  END SP_L3_UR_URGENCE;

  --Lecture des données actuelles des employés
  PROCEDURE SP_L4_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE_EMPLOYE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_AD_CLE,
             P.L_SI_CLE,
             P.L_AD_REFERENCE,
             P.V_AD_ADRESSE,
             P.V_AD_ADRESSE2,
             P.V_AD_NUM_MUNICIPAL,
             P.L_AD_TYPE_RUE,
             P.V_AD_NOM_RUE,
             P.L_AD_POINT_CARDINAL,
             P.L_AD_TYPE_UNITE,
             P.V_AD_NO_UNITE,
             P.V_AD_ADRESSE_POST,
             P.V_AD_ELECTRONIQUE_1,
             P.V_AD_ELECTRONIQUE_2,
             P.L_VI_CLE,
             P.V_AD_CODE_POSTAL,
             P.I_TE_CLE_1,
             P.V_AD_TELEPHONE_1,
             P.I_TE_CLE_2,
             P.V_AD_TELEPHONE_2,
             P.I_TE_CLE_3,
             P.V_AD_TELEPHONE_3,
             P.I_ST_CLE,
             P.V_AD_COMMENTAIRE,
             P.V_AD_CREE_PAR,
             P.D_AD_DATE_CREATION,
             P.V_AD_MODIFIE_PAR,
             P.D_AD_DATE_MODIFICATION,
             P.L_AD_REF_SITE,
             P.C_AD_REF_GENRE,
             P.I_PA_CLE,
             P.L_PR_CLE,
             P.L_VI_CLE,
             P.B_AD_IND_RDD,
             SO.I_CL_CLE,
             P.I_AD_TEL_PERIODE_1,
             P.I_AD_TEL_PERIODE_2,
             P.I_AD_TEL_PERIODE_3
        FROM AD_ADRESSE P, SU_SUJET S, LDD_LIEN_DOSSIER L, SO_SOCIETE SO
       WHERE P.L_AD_REF_SITE = NEW_L_AD_REF_SITE
         AND P.C_AD_REF_GENRE = NEW_C_AD_REF_GENRE
         AND P.L_AD_REFERENCE = NEW_L_AD_REFERENCE
         AND P.L_AD_REFERENCE = S.L_SU_CLE
         AND P.L_AD_REF_SITE = S.L_SI_CLE
         AND S.L_SU_CLE = L.L_DO_CLE(+)
         AND S.L_SI_CLE = L.L_DO_SITE(+)
         AND L.L_LDD_DOSSIER_ASSOCIE = SO.L_SO_CLE(+)
         AND L.L_LDD_SITE = SO.L_SI_CLE(+)
       ORDER BY P.D_AD_DATE_CREATION DESC;
  END SP_L4_Ad_Adresse;

  --Lecture des données historiques
  PROCEDURE SP_L4_Ad_Adresse(NEW_L_AD_REFERENCE IN AD_ADRESSE.L_AD_REFERENCE%TYPE,
                             NEW_L_AD_REF_SITE  IN AD_ADRESSE.L_AD_REF_SITE%TYPE,
                             NEW_C_AD_REF_GENRE IN AD_ADRESSE.C_AD_REF_GENRE%TYPE,
                             NEW_DATE           IN AD_ADRESSE.D_AD_DATE_CREATION%TYPE,
                             rc1                IN OUT DTS3_AD_ADRESSE_EMPLOYE) IS
  BEGIN
    OPEN rc1 FOR
      SELECT P.L_AD_CLE,
             P.L_SI_CLE,
             P.L_AD_REFERENCE,
             P.V_AD_ADRESSE,
             P.V_AD_ADRESSE2,
             P.V_AD_NUM_MUNICIPAL,
             P.L_AD_TYPE_RUE,
             P.V_AD_NOM_RUE,
             P.L_AD_POINT_CARDINAL,
             P.L_AD_TYPE_UNITE,
             P.V_AD_NO_UNITE,
             P.V_AD_ADRESSE_POST,
             P.V_AD_ELECTRONIQUE_1,
             P.V_AD_ELECTRONIQUE_2,
             P.L_VI_CLE,
             P.V_AD_CODE_POSTAL,
             P.I_TE_CLE_1,
             P.V_AD_TELEPHONE_1,
             P.I_TE_CLE_2,
             P.V_AD_TELEPHONE_2,
             P.I_TE_CLE_3,
             P.V_AD_TELEPHONE_3,
             P.I_ST_CLE,
             P.V_AD_COMMENTAIRE,
             P.V_AD_CREE_PAR,
             P.D_AD_DATE_CREATION,
             P.V_AD_MODIFIE_PAR,
             P.D_AD_DATE_MODIFICATION,
             P.L_AD_REF_SITE,
             P.C_AD_REF_GENRE,
             P.I_PA_CLE,
             P.L_PR_CLE,
             P.L_VI_CLE,
             P.B_AD_IND_RDD,
             SO.I_CL_CLE,
             P.I_AD_TEL_PERIODE_1,
             P.I_AD_TEL_PERIODE_2,
             P.I_AD_TEL_PERIODE_3
        FROM AD_ADRESSE P, SU_SUJET S, LDD_LIEN_DOSSIER L, SO_SOCIETE SO
       WHERE P.L_AD_REF_SITE = NEW_L_AD_REF_SITE
         AND P.C_AD_REF_GENRE = NEW_C_AD_REF_GENRE
         AND P.L_AD_REFERENCE = NEW_L_AD_REFERENCE
         AND P.D_AD_DATE_CREATION <=
             (SELECT MAX(A2.D_AD_DATE_CREATION)
                FROM AD_ADRESSE A2
               WHERE A2.L_AD_REFERENCE = P.L_AD_REFERENCE
                 AND A2.L_AD_REF_SITE = P.L_AD_REF_SITE
                 AND A2.C_AD_REF_GENRE = P.C_AD_REF_GENRE
                    --On ajoute un jour pour permettre des changements 24 heures après la liaison
                 AND A2.D_AD_DATE_CREATION <= NVL(NEW_DATE, SYSDATE) + 1)
         AND P.L_AD_REFERENCE = S.L_SU_CLE
         AND P.L_AD_REF_SITE = S.L_SI_CLE
         AND S.L_SU_CLE = L.L_DO_CLE(+)
         AND S.L_SI_CLE = L.L_DO_SITE(+)
         AND L.L_LDD_DOSSIER_ASSOCIE = SO.L_SO_CLE(+)
         AND L.L_LDD_SITE = SO.L_SI_CLE(+)
       ORDER BY P.D_AD_DATE_CREATION DESC;
  END SP_L4_Ad_Adresse;

-- RA0009	Responsable RDD : peut-être une société RDD ou un sujet RDD qui est lié avec le rôle "Responsable"
  PROCEDURE SP_SUJET_RDD_RESP_SOCIETE_RDD(rc1 IN OUT DTS_SUJET_RDD_RESP_SOCIETE_RDD) IS
  begin
    OPEN rc1 FOR
      SELECT SO.L_SO_CLE,
             SO.L_SI_CLE,
             SU.V_SU_NOM,
             SU.V_SU_PRENOM,
             LDDSOSU.D_LDD_DATE_CREATION
        FROM SO_SOCIETE SO, LDD_LIEN_DOSSIER LDDSOSU, SU_SUJET SU
       WHERE SU.B_SU_IND_RDD = 'yes'
         AND SO.B_SO_IND_RDD = 'yes'
         AND SO.I_CC_CLE <> 14920
         AND SU.I_CC_CLE <> 14920
         AND SU.L_SU_CLE = LDDSOSU.L_DO_CLE
         AND SU.L_SI_CLE = LDDSOSU.L_DO_SITE
         AND LDDSOSU.C_DO_GENRE = 'SU'
         AND LDDSOSU.L_LDD_DOSSIER_ASSOCIE = SO.L_SO_CLE
         AND LDDSOSU.L_LDD_SITE = SO.L_SI_CLE
         AND LDDSOSU.C_LDD_GENRE = 'SO'
         AND LDDSOSU.I_RO_CLE IN (659, 953);
  END SP_SUJET_RDD_RESP_SOCIETE_RDD;

-- RA0009	Responsable RDD : peut-être une société RDD ou un sujet RDD qui est lié avec le rôle "Responsable"  
PROCEDURE SP_SOCIETERDD_RESP_SOCIETERDD(rc1 IN OUT DTS_SOCIETERDD_RESP_SOCIETERDD) IS
begin
    OPEN rc1 FOR
      SELECT DISTINCT SO.L_SO_CLE,
                      SO.L_SI_CLE,
                      SO.V_SO_REFERENCE_PRENOM,
                      SO.V_SO_REFERENCE_NOM,
                      RESPONSABLESO.L_SO_CLE,
                      RESPONSABLESO.L_SI_CLE,
                      RESPONSABLESO.V_SO_NOM,
                      LDDSOSO.D_LDD_DATE_CREATION
        FROM SO_SOCIETE       SO,
             LDD_LIEN_DOSSIER LDDSOSO,
             SO_SOCIETE       RESPONSABLESO
       WHERE SO.B_SO_IND_RDD = 'yes'
         AND RESPONSABLESO.B_SO_IND_RDD = 'yes'
         AND SO.L_SO_CLE = LDDSOSO.L_DO_CLE
         AND SO.L_SI_CLE = LDDSOSO.L_DO_SITE
         AND LDDSOSO.C_DO_GENRE = 'SO'
         AND LDDSOSO.L_LDD_DOSSIER_ASSOCIE = RESPONSABLESO.L_SO_CLE
         AND LDDSOSO.L_LDD_SITE = RESPONSABLESO.L_SI_CLE
         AND LDDSOSO.C_LDD_GENRE = 'SO'
         AND LDDSOSO.I_RO_CLE IN (659, 953)
         AND SO.I_CC_CLE <> 14920
         AND RESPONSABLESO.I_CC_CLE <> 14920
      UNION
      SELECT DISTINCT SO.L_SO_CLE,
                      SO.L_SI_CLE,
                      SO.V_SO_REFERENCE_PRENOM,
                      SO.V_SO_REFERENCE_NOM,
                      RESPONSABLESO.L_SO_CLE,
                      RESPONSABLESO.L_SI_CLE,
                      RESPONSABLESO.V_SO_NOM,
                      LDDSOSO.D_LDD_DATE_CREATION
        FROM SO_SOCIETE       SO,
             LDD_LIEN_DOSSIER LDDSOSO,
             SO_SOCIETE       RESPONSABLESO
       WHERE SO.B_SO_IND_RDD = 'yes'
         AND RESPONSABLESO.B_SO_IND_RDD = 'yes'
         AND RESPONSABLESO.L_SO_CLE = LDDSOSO.L_DO_CLE
         AND RESPONSABLESO.L_SI_CLE = LDDSOSO.L_DO_SITE
         AND LDDSOSO.C_DO_GENRE = 'SO'
         AND LDDSOSO.L_LDD_DOSSIER_ASSOCIE = SO.L_SO_CLE
         AND LDDSOSO.L_LDD_SITE = SO.L_SI_CLE
         AND LDDSOSO.C_LDD_GENRE = 'SO'
         AND LDDSOSO.I_RO_CLE IN (659, 953)
         AND SO.I_CC_CLE <> 14920
         AND RESPONSABLESO.I_CC_CLE <> 14920;
END SP_SOCIETERDD_RESP_SOCIETERDD;

END Cardex_Lire_Lien;
/
